webpackJsonp([0],{"0NdG":function(n,e,t){var l,s,i,o;o=function(n){"use strict";n.__esModule=!0,n.sort=function(n,t,l,s){if(!Array.isArray(n))throw new TypeError("Can only sort arrays");t?"function"!=typeof t&&(s=l,l=t,t=o):t=o;l||(l=0);s||(s=n.length);var i=s-l;if(i<2)return;var r=0;if(i<e)return r=a(n,l,s,t),void u(n,l,s,l+r,t);var c=new p(n,t),g=function(n){var t=0;for(;n>=e;)t|=1&n,n>>=1;return n+t}(i);do{if((r=a(n,l,s,t))<g){var m=i;m>g&&(m=g),u(n,l,l+m,l+r,t),r=m}c.pushRun(l,r),c.mergeRuns(),i-=r,l+=r}while(0!==i);c.forceMergeRuns()};var e=32,t=7,l=256,s=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function i(n){return n<1e5?n<100?n<10?0:1:n<1e4?n<1e3?2:3:4:n<1e7?n<1e6?5:6:n<1e9?n<1e8?7:8:9}function o(n,e){if(n===e)return 0;if(~~n===n&&~~e===e){if(0===n||0===e)return n<e?-1:1;if(n<0||e<0){if(e>=0)return-1;if(n>=0)return 1;n=-n,e=-e}var t=i(n),l=i(e),o=0;return t<l?(n*=s[l-t-1],e/=10,o=-1):t>l&&(e*=s[t-l-1],n/=10,o=1),n===e?o:n<e?-1:1}var a=String(n),u=String(e);return a===u?0:a<u?-1:1}function a(n,e,t,l){var s=e+1;if(s===t)return 1;if(l(n[s++],n[e])<0){for(;s<t&&l(n[s],n[s-1])<0;)s++;!function(n,e,t){t--;for(;e<t;){var l=n[e];n[e++]=n[t],n[t--]=l}}(n,e,s)}else for(;s<t&&l(n[s],n[s-1])>=0;)s++;return s-e}function u(n,e,t,l,s){for(l===e&&l++;l<t;l++){for(var i=n[l],o=e,a=l;o<a;){var u=o+a>>>1;s(i,n[u])<0?a=u:o=u+1}var r=l-o;switch(r){case 3:n[o+3]=n[o+2];case 2:n[o+2]=n[o+1];case 1:n[o+1]=n[o];break;default:for(;r>0;)n[o+r]=n[o+r-1],r--}n[o]=i}}function r(n,e,t,l,s,i){var o=0,a=0,u=1;if(i(n,e[t+s])>0){for(a=l-s;u<a&&i(n,e[t+s+u])>0;)o=u,(u=1+(u<<1))<=0&&(u=a);u>a&&(u=a),o+=s,u+=s}else{for(a=s+1;u<a&&i(n,e[t+s-u])<=0;)o=u,(u=1+(u<<1))<=0&&(u=a);u>a&&(u=a);var r=o;o=s-u,u=s-r}for(o++;o<u;){var c=o+(u-o>>>1);i(n,e[t+c])>0?o=c+1:u=c}return u}function c(n,e,t,l,s,i){var o=0,a=0,u=1;if(i(n,e[t+s])<0){for(a=s+1;u<a&&i(n,e[t+s-u])<0;)o=u,(u=1+(u<<1))<=0&&(u=a);u>a&&(u=a);var r=o;o=s-u,u=s-r}else{for(a=l-s;u<a&&i(n,e[t+s+u])>=0;)o=u,(u=1+(u<<1))<=0&&(u=a);u>a&&(u=a),o+=s,u+=s}for(o++;o<u;){var c=o+(u-o>>>1);i(n,e[t+c])<0?u=c:o=c+1}return u}var p=function(){function n(e,s){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.array=null,this.compare=null,this.minGallop=t,this.length=0,this.tmpStorageLength=l,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=e,this.compare=s,this.length=e.length,this.length<2*l&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return n.prototype.pushRun=function(n,e){this.runStart[this.stackSize]=n,this.runLength[this.stackSize]=e,this.stackSize+=1},n.prototype.mergeRuns=function(){for(;this.stackSize>1;){var n=this.stackSize-2;if(n>=1&&this.runLength[n-1]<=this.runLength[n]+this.runLength[n+1]||n>=2&&this.runLength[n-2]<=this.runLength[n]+this.runLength[n-1])this.runLength[n-1]<this.runLength[n+1]&&n--;else if(this.runLength[n]>this.runLength[n+1])break;this.mergeAt(n)}},n.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var n=this.stackSize-2;n>0&&this.runLength[n-1]<this.runLength[n+1]&&n--,this.mergeAt(n)}},n.prototype.mergeAt=function(n){var e=this.compare,t=this.array,l=this.runStart[n],s=this.runLength[n],i=this.runStart[n+1],o=this.runLength[n+1];this.runLength[n]=s+o,n===this.stackSize-3&&(this.runStart[n+1]=this.runStart[n+2],this.runLength[n+1]=this.runLength[n+2]),this.stackSize--;var a=c(t[i],t,l,s,0,e);l+=a,0!==(s-=a)&&0!==(o=r(t[l+s-1],t,i,o,o-1,e))&&(s<=o?this.mergeLow(l,s,i,o):this.mergeHigh(l,s,i,o))},n.prototype.mergeLow=function(n,e,l,s){var i=this.compare,o=this.array,a=this.tmp,u=0;for(u=0;u<e;u++)a[u]=o[n+u];var p=0,g=l,m=n;if(o[m++]=o[g++],0!=--s)if(1!==e){for(var d=this.minGallop;;){var _=0,f=0,h=!1;do{if(i(o[g],a[p])<0){if(o[m++]=o[g++],f++,_=0,0==--s){h=!0;break}}else if(o[m++]=a[p++],_++,f=0,1==--e){h=!0;break}}while((_|f)<d);if(h)break;do{if(0!==(_=c(o[g],a,p,e,0,i))){for(u=0;u<_;u++)o[m+u]=a[p+u];if(m+=_,p+=_,(e-=_)<=1){h=!0;break}}if(o[m++]=o[g++],0==--s){h=!0;break}if(0!==(f=r(a[p],o,g,s,0,i))){for(u=0;u<f;u++)o[m+u]=o[g+u];if(m+=f,g+=f,0===(s-=f)){h=!0;break}}if(o[m++]=a[p++],1==--e){h=!0;break}d--}while(_>=t||f>=t);if(h)break;d<0&&(d=0),d+=2}if(this.minGallop=d,d<1&&(this.minGallop=1),1===e){for(u=0;u<s;u++)o[m+u]=o[g+u];o[m+s]=a[p]}else{if(0===e)throw new Error("mergeLow preconditions were not respected");for(u=0;u<e;u++)o[m+u]=a[p+u]}}else{for(u=0;u<s;u++)o[m+u]=o[g+u];o[m+s]=a[p]}else for(u=0;u<e;u++)o[m+u]=a[p+u]},n.prototype.mergeHigh=function(n,e,l,s){var i=this.compare,o=this.array,a=this.tmp,u=0;for(u=0;u<s;u++)a[u]=o[l+u];var p=n+e-1,g=s-1,m=l+s-1,d=0,_=0;if(o[m--]=o[p--],0!=--e)if(1!==s){for(var f=this.minGallop;;){var h=0,y=0,b=!1;do{if(i(a[g],o[p])<0){if(o[m--]=o[p--],h++,y=0,0==--e){b=!0;break}}else if(o[m--]=a[g--],y++,h=0,1==--s){b=!0;break}}while((h|y)<f);if(b)break;do{if(0!==(h=e-c(a[g],o,n,e,e-1,i))){for(e-=h,_=(m-=h)+1,d=(p-=h)+1,u=h-1;u>=0;u--)o[_+u]=o[d+u];if(0===e){b=!0;break}}if(o[m--]=a[g--],1==--s){b=!0;break}if(0!==(y=s-r(o[p],a,0,s,s-1,i))){for(s-=y,_=(m-=y)+1,d=(g-=y)+1,u=0;u<y;u++)o[_+u]=a[d+u];if(s<=1){b=!0;break}}if(o[m--]=o[p--],0==--e){b=!0;break}f--}while(h>=t||y>=t);if(b)break;f<0&&(f=0),f+=2}if(this.minGallop=f,f<1&&(this.minGallop=1),1===s){for(_=(m-=e)+1,d=(p-=e)+1,u=e-1;u>=0;u--)o[_+u]=o[d+u];o[m]=a[g]}else{if(0===s)throw new Error("mergeHigh preconditions were not respected");for(d=m-(s-1),u=0;u<s;u++)o[d+u]=a[u]}}else{for(_=(m-=e)+1,d=(p-=e)+1,u=e-1;u>=0;u--)o[_+u]=o[d+u];o[m]=a[g]}else for(d=m-(s-1),u=0;u<s;u++)o[d+u]=a[u]},n}()},s=[e],void 0===(i="function"==typeof(l=o)?l.apply(e,s):l)||(n.exports=i)},Rvfx:function(n,e,t){n.exports=t("0NdG")},"k+8m":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=t("3j3K"),s=t("AFGG"),i=t("zCXK"),o=t("+KvB"),a=function(){function n(n,e,t){this.fayeService=n,this.commonService=e,this.cdRef=t,this.MessageTypeEnum=i.d,this.caller_info={},this.video_call_obj={is_video_open:!1,is_video_caller:!1,video_offer_data:{},incoming_call_popup:!1,channel_id:null,channel_image:"",user_name:"",user_id:0,full_name:""},this.VideoCallType={START_CALL:"START_CALL",CALL_REJECTED:"CALL_REJECTED",READY_TO_CONNECT:"READY_TO_CONNECT",CALL_HUNG_UP:"CALL_HUNG_UP",USER_BUSY:"USER_BUSY",VIDEO_OFFER:"VIDEO_OFFER",NEW_ICE_CANDIDATE:"NEW_ICE_CANDIDATE",VIDEO_ANSWER:"VIDEO_ANSWER"},this.alive=!0}return n.prototype.ngOnInit=function(){console.log("layout component loaded"),this.onWindowReceiveData()},n.prototype.playNotificationSound=function(n,e){document.getElementById("video-sound").innerHTML='<audio id="sound-div" autoplay="autoplay"><source src="'+n+'.mp3" type="audio/mpeg" /><source src="'+n+'.ogg" type="audio/ogg" /><embed hidden="true" autostart="true" loop="false" src="'+n+'.mp3" /></audio>',document.getElementById("sound-div").loop=e},n.prototype.onWindowReceiveData=function(){var n=this;window.addEventListener("message",function(e){switch(e.data.type){case"paymentRequest":n.commonService.newPostMessageReceived.emit(e.data.data)}})},n.prototype.convertGetRequestParams=function(n){var e="";for(var t in n)""==e&&(e+="?"),"undefined"!=typeof n[t]&&("object"==typeof n[t]?e+=t+"="+JSON.stringify(n[t])+"&":e+=t+"="+n[t]+"&");return e.substring(0,e.length-1)},n.ctorParameters=function(){return[{type:s.a},{type:o.a},{type:l.i}]},n}(),u=t("p3n4"),r=t("5oXY"),c=this&&this.__assign||Object.assign||function(n){for(var e,t=1,l=arguments.length;t<l;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n},p=function(){function n(n,e,t,l,s,o){var a=this;this.commonService=n,this.fuguWidgetService=e,this.router=t,this.fayeService=l,this.changeDetectorRef=s,this.route=o,this.alive=!0,this.conversations={},this.showLoader=!1,this.MessageTypeEnum=i.d,this.UserTypeEnum=i.g,this.MessageStatusEnum=i.c,this.pageStart=1,this.pageSize=20,this.conv_end_bool=!1,this.closedFromChat=!1,this.firstHit=!1,this.SWIPE_ACTION={LEFT:"swipeleft",RIGHT:"swiperight"},this.pos=0,this.newIssue=0,this.x=-1,this.y=-1,this.isScrollServiceCallActive=!1,this.errorMessage="Please try again.",this.showErrorMessage=!1,this.route.params.subscribe(function(n){n&&n.closedFromChat?a.closedFromChat=!0:a.closedFromChat=!1})}return n.prototype.ngOnInit=function(){var n=this;console.log("conversation component loaded"),this.showLoader=!0,!this.closedFromChat&&this.commonService.userDetails.access_token&&this.getConversations(),this.customerChatSub=this.commonService.customerChatClicked.subscribe(function(){n.openCustomerChats()}),this.agentChatSub=this.commonService.openAgentConversations.subscribe(function(){n.openAgentChats()}),this.fayeService.chatNonReassignEvent.takeWhile(function(){return n.alive}).subscribe(function(e){return n.onChatNonReassignEvent(e)}),window.conv=this},n.prototype.openCustomerChats=function(){var n=this;this.showLoader=!0,this.conversations={},this.pageSize=20,this.pageStart=1,this.conv_end_bool=!1,this.firstHit=!1,this.commonService.isCustomerChat=!0,setTimeout(function(){n.activeChatsContainer.nativeElement.scrollTop=0},100),this.fuguWidgetService.fuguWidgetData.customer_info=this.fuguWidgetService.fuguWidgetData.customer_info?this.fuguWidgetService.fuguWidgetData.customer_info:{},this.fuguWidgetService.fuguWidgetData.is_fork?this.fuguWidgetService.putUserDetails(this.commonService.putUserDataForCustomer()).takeWhile(function(){return n.alive}).subscribe(function(e){n.showErrorMessage=!1,n.commonService.userDetails.customer_id=e.data.user_id,n.commonService.userDetails.searched_full_name=e.data.full_name,n.getConversations()},function(e){n.showLoader=!1,n.showErrorMessage=!0}):this.fuguWidgetService.putUserDetailsReseller(this.commonService.putUserDataForCustomer(),!0).takeWhile(function(){return n.alive}).subscribe(function(e){n.showErrorMessage=!1,n.commonService.userDetails.customer_id=e.data.user_id,n.commonService.userDetails.searched_full_name=e.data.full_name,n.getConversations()},function(e){n.showLoader=!1,n.showErrorMessage=!0})},n.prototype.openAgentChats=function(){var n=this;this.showLoader=!0,this.conversations={},this.pageSize=20,this.pageStart=1,this.conv_end_bool=!1,this.firstHit=!1,this.commonService.isCustomerChat=!1,setTimeout(function(){n.activeChatsContainer.nativeElement.scrollTop=0},100),this.getConversations()},n.prototype.getConversations=function(){var n,e=this;n=this.commonService.isCustomerChat?this.commonService.userDetails.customer_id:"",this.fuguWidgetService.getConversations(this.commonService.userDetails.access_token,this.commonService.userDetails.en_user_id,n,this.pageStart).takeWhile(function(){return e.alive}).subscribe(function(t){e.showErrorMessage=!1;try{e.pageSize=t.data.page_size;var l=t.data.conversation_list;l.length||(e.conv_end_bool=!0);if(l&&l.length){for(var s=0;s<l.length;s++)l[s].unique_id=l[s].channel_id,l[s].date_time=l[s].last_updated_at,e.conversations[l[s].channel_id]=l[s],s>0&&l[s].unread_count&&l[s].unread_count;e.conversations=c({},e.conversations),1==l.length?(e.commonService.showBackButton=!1,e.commonService.recalculateUnreadCount(l[0].channel_id),e.router.navigate(["chat/"+l[0].channel_id])):l.length>1&&(e.commonService.showBackButton=!0)}e.firstHit=!0,0==Object.keys(e.conversations).length&&e.commonService.isCustomerChat&&e.router.navigate(["/chat/-1"],{queryParams:{customer_id:n}})}catch(n){console.log(n)}finally{e.showLoader=!1}},function(n){n=n.json(),console.log(n),e.showLoader=!1,e.showErrorMessage=!0})},n.prototype.scrollServiceCall=function(){var n,e=this;this.isScrollServiceCallActive=!0,this.showLoader=!0,n=this.commonService.isCustomerChat?this.commonService.userDetails.customer_id:"",this.fuguWidgetService.getConversations(this.commonService.userDetails.access_token,this.commonService.userDetails.en_user_id,n,this.pageStart).takeWhile(function(){return e.alive}).subscribe(function(n){try{e.pageSize=n.data.page_size;var t=n.data.conversation_list;t.length||(e.conv_end_bool=!0);if(t&&t.length){for(var l=0;l<t.length;l++)t[l].unique_id=t[l].channel_id,t[l].date_time=t[l].last_updated_at,e.conversations[t[l].channel_id]=t[l],l>0&&t[l].unread_count&&t[l].unread_count;e.conversations=c({},e.conversations)}e.isScrollServiceCallActive=!1}catch(n){console.log(n)}e.showLoader=!1},function(n){e.showLoader=!1,e.isScrollServiceCallActive=!1})},n.prototype.onScroll=function(n){(n.target.scrollTop+n.target.clientHeight)/n.target.scrollHeight>=.9&&!this.conv_end_bool&&this.firstHit&&!this.isScrollServiceCallActive&&(this.pageStart+=this.pageSize,this.scrollServiceCall())},n.prototype.oncrossClick=function(){this.commonService.postMessageToParentWindow({type:"Collapse",data:{}})},n.prototype.disableScroll=function(n,e){n.deltaY<=0&&0==e.scrollTop?(n.stopPropagation(),n.preventDefault(),this.pos=0,this.newIssue=0):n.deltaY>=0&&e.scrollTop==e.scrollHeight-e.offsetHeight&&(n.stopPropagation(),n.preventDefault(),this.pos=0,this.newIssue=0)},n.prototype.touchDirection=function(n,e){var t=n.e;"up"==n.direction&&0==e.scrollTop?(t.stopPropagation(),t.preventDefault(),this.pos=0,this.newIssue=0):"down"==n.direction&&e.scrollTop==e.scrollHeight-e.offsetHeight&&(t.stopPropagation(),t.preventDefault(),this.pos=0,this.newIssue=0)},n.prototype.onTouchEnd=function(n,e){},n.prototype.onChatNonReassignEvent=function(n){if(n.notification_type==i.e.Read_All)return this.commonService.recalculateUnreadCount(n.channel_id),void(this.conversations[n.channel_id]&&(this.conversations[n.channel_id].is_new_count=0,this.conversations[n.channel_id].unread_count=0,this.changeDetectorRef.detectChanges()));if(n.message_type!=i.d.Video_Call&&![i.e.INRIDE_STATUS,i.e.User_Online_Status,i.e.CHANNEL_REFRESH_AGENT].includes(n.notification_type)){n.last_updated_at||(n.last_updated_at=n.date_time);var e=n.channel_id,t=n.user_unique_key;n.agent_id&&"string"==typeof n.agent_id&&(n.agent_id=parseInt(n.agent_id)),n.agent_id&&null==n.agent_id&&(n.agent_id=n.assigned_to),n.status=1,n.last_updated_at=n.date_time,n.unique_id=e,this.conversations[e]?(n.unread_count=this.conversations[e].unread_count?this.conversations[e].unread_count+1:1,this.conversations[e]=n):this.commonService.isCustomerChat||(n.unread_count=1,this.conversations[e]=n),n.last_sent_by_id==this.commonService.userDetails.user_id?n.unread_count=0:(this.commonService.playNotificationSound("https://s3.amazonaws.com/circlein/fugu_bot/beep"),this.commonService.updateAndEmitUnreadCountOnFaye(e,t)),this.conversations=c({},this.conversations),this.changeDetectorRef.detectChanges()}},n.prototype.newConversation=function(){this.router.navigate(["chat/-1"],{queryParams:{label_id:-1},skipLocationChange:!0})},n.prototype.channelAcronym=function(n){if(n){var e=n.trim().split(" ");return e[0][0]+(e[1]?e[1][0]:"")}return""},n.prototype.onConversationClick=function(n){var e;this.conversations[n].label_id,e=+this.conversations[n].channel_id,this.conversations[n].message,this.commonService.recalculateUnreadCount(e),this.router.navigate(["chat/"+e])},n.prototype.onswipedown=function(n,e){0==n.scrollTop&&(e.srcEvent.stopPropagation(),e.preventDefault(),this.pos=0,this.newIssue=0)},n.prototype.onswipeup=function(n,e){n.scrollTop==n.scrollHeight-n.offsetHeight&&(e.srcEvent.stopPropagation(),e.preventDefault(),this.pos=0,this.newIssue=0)},n.prototype.ngOnDestroy=function(){this.customerChatSub.unsubscribe(),this.agentChatSub.unsubscribe(),this.unbindEvent(),this.alive=!1},n.prototype.onTouchStart=function(n){this.lastY=n.touches?n.touches[0].pageY:n.pageY},n.prototype.onTouchMove=function(n,e){var t=n.touches?n.touches[0].pageY:n.pageY;Math.abs(t-this.lastY)<15||(t>this.lastY?(this.direction="down",0==e.scrollTop?(n.stopPropagation(),n.preventDefault(),this.bindEvent(),this.pos=0,this.newIssue=0):this.unbindEvent()):(this.direction="up",e.scrollTop==e.scrollHeight-e.offsetHeight?(n.stopPropagation(),n.preventDefault(),this.pos=0,this.newIssue=0,n.stopImmediatePropagation(),this.bindEvent()):this.unbindEvent()))},n.prototype.bindEvent=function(){document.body.addEventListener("touchmove",this.fn)},n.prototype.fn=function(n){n.preventDefault()},n.prototype.unbindEvent=function(){document.body.removeEventListener("touchmove",this.fn)},n.ctorParameters=function(){return[{type:o.a},{type:u.a},{type:r.k},{type:s.a},{type:l.i},{type:r.a}]},n}(),g=t("2CBl"),m=function(){function n(n,e,t,l,s,o,a,u){this.router=n,this.activatedRoute=e,this.commonService=t,this.fuguWidgetService=l,this.fayeService=s,this.ngZone=o,this.layoutService=a,this.cdRef=u,this.MessageTypeEnum=i.d,this.UserTypeEnum=i.g,this.MessageStatusEnum=i.c,this.ChatTypeEnum=i.a,this.alive=!0,this.activeChannelId=-1,this.messages=[],this.prevMessagesToSend=[],this.labelHeader="",this.errorMessage="",this.showLoader=!1,this.last_customer_time_index=0,this.last_agent_time_index=0,this.labelId=-1,this.customerId=-1,this.isUserTyping=!1,this.isAgentTyping=!1,this.isAgentTypingName="",this.isFayeConnected=!0,this.messageToSend="",this.hideBackBtn=!1,this.pos=0,this.newIssue=0,this.businessNameToReplace="JungleWorks",this.backgroundList=["url('assets/img/texture.png')","url('assets/img/texture-plane.png')","url('assets/img/texture-plane-white.png')"],this.alignmentList=["left","center","right"],this.userType=i.g,this.showButtonMessage=!1,this.isBotReply=0,this.componentInitialize=!1,this.messages_dictionary={},this.access_token="",this.buttonFields={},this.IntegrationTypeEnum=i.b,this.pageIndex=1,this.pageSize=0,this.fetchingOnScrollMessages=!1,this.isAllMessagesFetched=!1,this.file_uploading_text=!1,this.mediaPlayerObject={is_open:!1,message_data:{}},this.dropup_open=!1,this.showFloatingBtn=!1,this.showFloatingBtnLength=0,this.replyDisabled=!1}return n.prototype.ngOnInit=function(){var n=this;window.chat=this,this.commonService.newPostMessageReceived.takeWhile(function(){return n.alive}).subscribe(function(e){n.createFayePaymentRequest(e)}),this.uuidv4=t("DtRx"),this.access_token=this.fuguWidgetService.fuguWidgetData.access_token,this.touchdevice="ontouchstart"in document.documentElement,this.labelHeader=this.commonService.userDetails.searched_full_name||this.commonService.userDetails.business_name;var e=Number(this.commonService.configData["background-color-theme"])||0,l=Number(this.commonService.configData["typing-allignment"])||0;document.documentElement.style.setProperty("--background-url",this.backgroundList[e<this.backgroundList.length&&e>=0?e:0]),document.documentElement.style.setProperty("--align-typing",this.alignmentList[l<this.alignmentList.length&&l>=0?l:0]),this.activatedRoute.params.subscribe(function(e){var t=+e.channelId||-1;if(n.activatedRoute.queryParams.subscribe(function(e){n.conv_transaction_id=+e.transaction_id||""}),n.hideBackBtn=!0,-10==t)n.showLoader=!0;else if(t<0)console.log("invalid channel id"),n.activatedRoute.queryParams.subscribe(function(e){n.customerId=+e.customer_id||-1,n.labelId=+e.label_id||-1,n.default_message=e.default_message||"",n.default_message&&n.appendDefaultMessage()});else{n.activeChannelId=t,n.layoutService.active_channel_object={channel_id:n.activeChannelId},n.setupActiveChannelSubscription(),n.showLoader=!0;var l=!1,s=!1;n.activatedRoute.queryParams.subscribe(function(e){n.customerId=+e.customer_id||-1,l=!!e.publish_message,s=!!e.publish_once}),n.refreshData(t,l,s)}}),this.layoutService.uploadImageEmitter.takeWhile(function(){return n.alive}).subscribe(function(e){e&&(e.index=n.messages.length?n.messages.length-1:0,n.appendMessage(e,!0),-1!=n.activeChannelId&&n.postMessageThroughFaye(e))}),this.layoutService.uploadingTextEmitter.takeWhile(function(){return n.alive}).subscribe(function(e){"undefined"!=typeof e&&(n.file_uploading_text=e,setTimeout(function(){n.scrollToBottom()},0))})},n.prototype.savePrevMessagesToSend=function(){this.prevMessagesToSend=[];for(var n=this.messages.length-1;n>=0&&this.messages[n].message_status==this.MessageStatusEnum.Sending;n--)this.prevMessagesToSend.push(this.messages[n])},n.prototype.sendPrevMessages=function(){for(var n=this.prevMessagesToSend.length-1;n>=0&&this.prevMessagesToSend[n].message_status==this.MessageStatusEnum.Sending;n--)this.messageToSend=this.prevMessagesToSend[n].message,this.onSendClick();this.prevMessagesToSend=[]},n.prototype.refreshData=function(n,e,t,l){var s=this;if(void 0===l&&(l=1),this.savePrevMessagesToSend(),!(n<0)){this.messageSub&&(this.messageSub.unsubscribe(),this.showLoader=!1),this.showLoader=!0,1==l&&(this.messages=[]);var i={channelId:n,page_start:l,user_id:this.commonService.userDetails.en_user_id,access_token:this.commonService.userDetails.access_token};this.messageSub=this.fuguWidgetService.getMessages(i).takeWhile(function(){return s.alive}).subscribe(function(n){try{s.messages=n.data.messages.concat(s.messages),s.showFloatingBtnLength+=n.data.messages.length,s.replyDisabled=n.data.disable_reply,1==i.page_start&&(s.messages_dictionary={}),s.pageSize=n.data.page_size,n.data.messages.length<s.pageSize&&(s.isAllMessagesFetched=!0),s.fetchingOnScrollMessages=!1,n.data.messages.map(function(n){n.muid&&(s.messages_dictionary[n.muid]=!0)}),s.chatType=n.data.chat_type;var l=s.fuguWidgetService.fuguWidgetData.businessName;if(l&&n.data.label==s.businessNameToReplace&&(n.data.label=l),s.labelHeader=n.data.label||s.commonService.userDetails.searched_full_name,e&&(s.messages.length&&t||s.sendDefaultMessage()),1!=i.page_start)try{s.scrollDiv.nativeElement.scrollTo(0,1)}catch(n){console.log(n)}else setTimeout(function(){s.scrollToBottom()},100);s.calculateTimeIndexes(),s.sendPrevMessages()}catch(n){s.errorMessage=n.message}finally{s.showLoader=!1,s.componentInitialize=!0}},function(n){s.componentInitialize=!0,n=n.json(),console.log(n),s.errorMessage=n.message,s.showLoader=!1})}},n.prototype.onMessagesScroll=function(){this.scrollDiv.nativeElement.scrollTop<this.scrollDiv.nativeElement.scrollHeight-this.scrollDiv.nativeElement.offsetHeight-30?this.showFloatingBtn||(this.showFloatingBtn=!0,this.showFloatingBtnLength=this.messages.length,this.cdRef.detectChanges()):this.showFloatingBtn&&(this.showFloatingBtn=!1,this.showFloatingBtnLength=this.messages.length,this.cdRef.detectChanges()),0==this.scrollDiv.nativeElement.scrollTop&&(this.isAllMessagesFetched||this.fetchingOnScrollMessages||(this.pageIndex=this.pageIndex+this.pageSize,this.fetchingOnScrollMessages=!0,this.messageSub&&this.messageSub.unsubscribe(),this.refreshData(this.activeChannelId,!1,!1,this.pageIndex)))},n.prototype.openImage=function(n){this.commonService.postMessageToParentWindow({type:"Image",data:n})},n.prototype.oncrossClick=function(){this.commonService.postMessageToParentWindow({type:"Collapse",data:{closedFromChat:!0}})},n.prototype.disableScroll=function(n,e){n.deltaY<=0&&0==e.scrollTop?(n.stopPropagation(),n.preventDefault(),this.pos=0,this.newIssue=0):n.deltaY>=0&&e.scrollTop==e.scrollHeight-e.offsetHeight&&(n.stopPropagation(),n.preventDefault(),this.pos=0,this.newIssue=0)},n.prototype.replaceURLWithHTMLLinks=function(n){try{if("string"!=typeof n)return n;return(n=this.replacePhoneWithHTMLTel(n)).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a target='_blank' href='$1'>$1</a>")}catch(e){return console.log(e),n}},n.prototype.replacePhoneWithHTMLTel=function(n){try{if("string"!=typeof n)return n;return n.replace(/(\+?(?:(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)|\((?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\))[0-9. -]{4,14})(?:\b|x\d+)/gi,"<a href='tel:$1'>$1</a>")}catch(e){return console.log(e),n}},n.prototype.modifyMessage_messageList=function(n){try{return"string"!=typeof n?n:n.replace(new RegExp("\n","g"),"<br />")}catch(e){return n}},n.prototype.backToConversations=function(){this.sendTypingStoppedEvent(),this.fayeService.unsubscribeToActiveChannel(),this.router.navigate(["conversations"],{skipLocationChange:!0})},n.prototype.scrollToBottom=function(){this.showFloatingBtnLength=this.messages.length,this.scrollDiv.nativeElement.scrollTop=this.scrollDiv.nativeElement.scrollHeight},n.prototype.calculateTimeIndexes=function(){for(var n=!1,e=!1,t=this.messages.length-1;t>=0&&(!n||!e);t--)this.messages[t].message_type!=this.MessageTypeEnum.Activity_Message&&(n||this.messages[t].user_type!=this.UserTypeEnum.Customer||(n=!0,this.last_customer_time_index=t),e||this.messages[t].user_type!=this.UserTypeEnum.Agent||(e=!0,this.last_agent_time_index=t))},n.prototype.onSendClick=function(){if(!this.showLoader){if(-1==this.activeChannelId&&-1==this.labelId){if(e=this.createMessageToAppendInMessages()){this.appendMessage(e,!0);var n=this.createFayeMessageToSend();this.createNewConversation(n)}}else if(-1!=this.activeChannelId){if(e=this.createMessageToAppendInMessages()){this.appendMessage(e,!0);n=this.createFayeMessageToSend();this.postMessageThroughFaye(n)}}else{var e;if(e=this.createMessageToAppendInMessages()){this.appendMessage(e,!0);n=this.createFayeMessageToSend();this.createNewConversation(n)}}for(var t=document.getElementsByTagName("textarea"),l=0;l<t.length;l++)t[l].style.height="18px";this.messageToSend=""}},n.prototype.createFayeMessageToSend=function(){var n=this.messageToSend.trim();if(!n)return"";var e=moment().utc().format();e=e.replace("Z",".000Z");var t={message:n,full_name:this.commonService.userDetails.full_name,user_id:this.commonService.userDetails.user_id,date_time:e,is_typing:i.f.Typing_End,message_type:i.d.Customer_Agent_Message,user_type:i.g.Customer,message_status:i.c.Sending,index:this.messages.length?this.messages.length-1:0,is_bot_reply:this.isBotReply};return this.isBotReply=0,t},n.prototype.createMessageToAppendInMessages=function(){var n=this.messageToSend.trim();if(!n)return"";var e=moment().utc().format();return e=e.replace("Z",".000Z"),{message:n,full_name:this.commonService.userDetails.full_name,user_id:this.commonService.userDetails.user_id,date_time:e,message_type:i.d.Customer_Agent_Message,message_status:i.c.Sending,image_url:"",thumbnail_url:"",user_type:i.g.Customer}},n.prototype.sendDefaultMessage=function(){var n=this.commonService.defaultMessageToPublish.trim();if(!n)return"";var e=moment().utc().format();e=e.replace("Z",".000Z");var t={message:n,full_name:this.commonService.userDetails.full_name,user_id:this.commonService.userDetails.user_id,date_time:e,message_type:i.d.Customer_Agent_Message,message_status:i.c.Sending,image_url:"",thumbnail_url:"",user_type:i.g.Customer,skip_bot:1};this.appendMessage(t,!0);var l={message:n,full_name:this.commonService.userDetails.full_name,user_id:this.commonService.userDetails.user_id,date_time:e,is_typing:i.f.Typing_End,message_type:i.d.Customer_Agent_Message,user_type:i.g.Customer,message_status:i.c.Sending,index:this.messages.length?this.messages.length-1:0,skip_bot:1};this.postMessageThroughFaye(l)},n.prototype.postMessageThroughFaye=function(n){var e=this.uuidv4();n.muid=e,this.messages_dictionary[e]=!0,this.fayeService.sendMessage(n),!this.commonService.isConversationListValid&&this.messages.length&&(this.commonService.isConversationListValid=!0)},n.prototype.createNewConversation=function(n){var e=this,t={access_token:this.commonService.userDetails.access_token,initiator_en_agent_id:this.commonService.userDetails.en_user_id,user_id:this.customerId,chat_type:0};this.fuguWidgetService.adminToUserChat(t).takeWhile(function(){return e.alive}).subscribe(function(t){e.activeChannelId=t.data.channel_id,e.layoutService.active_channel_object={channel_id:e.activeChannelId},e.alive&&(e.setupActiveChannelSubscription(),e.postMessageThroughFaye(n))},function(n){console.log("create new conversation error")})},n.prototype.setupActiveChannelSubscription=function(){var n=this;this.fayeService.subscribeToChannel(this.activeChannelId),this.fayeService.chatNonReassignEvent.takeWhile(function(){return n.alive}).subscribe(function(e){return n.onChatNonReassignEvent(e)}),this.fayeService.activeChannelIdMessageEvent.takeWhile(function(){return n.alive}).subscribe(function(e){return n.onActiveChannelIdMessageEvent(e)}),this.fayeService.activeChannelIdTypingEvent.takeWhile(function(){return n.alive}).subscribe(function(e){return n.onActiveChannelIdTypingEvent(e)}),this.fayeService.activeChannelIdMessageSentEvent.takeWhile(function(){return n.alive}).subscribe(function(e){return n.onActiveChannelIdMessageSentEvent(e)}),this.fayeService.readAllEvent.takeWhile(function(){return n.alive}).subscribe(function(e){return n.onReadAllEvent(e)}),this.fayeService.messageDeliveredEvent.takeWhile(function(){return n.alive}).subscribe(function(e){return n.onMessageDeliveredEvent(e)}),this.fayeService.messageReadEvent.takeWhile(function(){return n.alive}).subscribe(function(e){return n.onMessageReadEvent(e)}),this.fayeService.fayeConnectionEvent.takeWhile(function(){return n.alive}).subscribe(function(e){return n.onFayeConnectDisconnectEvent(e)})},n.prototype.onChatNonReassignEvent=function(n){if(n.notification_type!=i.e.Read_All){if(![i.e.INRIDE_STATUS,i.e.User_Online_Status,i.e.CHANNEL_REFRESH_AGENT].includes(n.notification_type))if(n.channel_id!=this.activeChannelId){if(n.message_type==i.d.Video_Call)return;n.last_sent_by_id!=this.commonService.userDetails.user_id&&(this.commonService.updateAndEmitUnreadCountOnFaye(n.channel_id,n.user_unique_key),this.commonService.playNotificationSound("https://s3.amazonaws.com/circlein/fugu_bot/beep"))}else switch(n.message_type){case i.d.Custom_Action_Message:this.appendNewFayeMessage(n);break;case i.d.Form_Message:this.buttonFields={},this.appendNewFayeMessage(n);break;case i.d.Feedback_Message:this.appendNewFayeMessage(n),this.setFormType()}}else this.commonService.recalculateUnreadCount(n.channel_id)},n.prototype.appendNewFayeMessage=function(n){this.showFloatingBtn?this.appendMessage(n,!1):this.appendMessage(n,!0)},n.prototype.setFormType=function(){var n=this;setTimeout(function(){n.buttonFields&&n.buttonFields.content_value&&n.selectFormType(n.buttonFields.default_action_id,"")})},n.prototype.onActiveChannelIdMessageEvent=function(n){var e=this;if(![i.e.CHANNEL_REFRESH_AGENT].includes(n.notification_type))if(n.notification_type!=i.e.Channel_Refresh)switch(n.message_type){case this.MessageTypeEnum.Bot_Text_Message:this.appendNewFayeMessage(n),this.setFormType();break;default:this.ngZone.run(function(){if(![i.d.Form_Message,i.d.Feedback_Message].includes(n.message_type)){if((""==n.message&&""==n.thumbnail_url||0==n.on_subscribe||1==n.on_subscribe||(!n.muid||e.messages_dictionary[n.muid])&&n.muid||n.message_type==i.d.Custom_Action_Message)&&n.message_type!=i.d.Payment_Message){if(n.message_type==i.d.Custom_Action_Message&&e.messages_dictionary[n.muid]&&n.selected_btn_id)for(var t=0;t<e.messages.length;t++)if(e.messages[t].muid==n.muid){n.content_value&&(e.messages[t].content_value=n.content_value),e.messages[t].selected_btn_id=n.selected_btn_id,e.messages[t].is_active=n.is_active;break}}else{n.user_id==e.commonService.userDetails.user_id&&(n.message_status=e.MessageStatusEnum.Sent),e.appendNewFayeMessage(n),e.setFormType();var l=moment().utc().format();l=l.replace("Z",".000Z");var s={user_id:+e.commonService.userDetails.user_id,channel_id:e.activeChannelId,notification_type:i.e.Read_All,user_type:i.g.Agent};e.fayeService.sendAck_Read(s)}n.user_id==e.commonService.userDetails.user_id||""!=n.message||1!=n.on_subscribe&&0!=n.on_subscribe||(e.onSubscribe=n.on_subscribe,1==n.on_subscribe&&e.setMessageStatuses(3))}})}else this.replyDisabled=n&&n.disable_reply||0},n.prototype.onActiveChannelIdTypingEvent=function(n){var e=this;this.ngZone.run(function(){n.is_typing==i.f.Typing_Start&&n.user_id!=e.commonService.userDetails.user_id?n.user_type==i.g.Agent?e.isUserTyping=!0:n.user_type==i.g.Customer&&(e.chatType==i.a.AdminToAdmin?(e.isUserTyping=!0,e.isAgentTypingName=n.full_name):(e.isAgentTyping=!0,e.isAgentTypingName=n.full_name)):n.is_typing==i.f.Typing_Stopped&&n.user_id!=e.commonService.userDetails.user_id&&(n.user_type==i.g.Agent?e.isUserTyping=!1:n.user_type==i.g.Customer&&(e.chatType==i.a.AdminToAdmin?(e.isUserTyping=!1,e.isAgentTypingName=""):(e.isAgentTyping=!1,e.isAgentTypingName="")))})},n.prototype.onActiveChannelIdMessageSentEvent=function(n){var e=this;this.ngZone.run(function(){if(-1!=n.index){e.messages[n.index].message_status=i.c.Sent;var t=moment().utc().format();t=t.replace("Z",".000Z"),e.messages[n.index].date_time=t,e.setFormType()}})},n.prototype.onReadAllEvent=function(n){var e=this;this.ngZone.run(function(){if(e.commonService.userDetails.user_id!=n.user_id){for(var t=0;t<e.messages.length;t++)e.messages[t].user_type==i.g.Customer&&(e.messages[t].message_status=i.c.Read);e.messages[e.messages.length-1].message_status=i.c.Read;var l=moment().utc().format();l=l.replace("Z",".000Z"),e.messages[e.messages.length-1].date_time=l}})},n.prototype.onMessageDeliveredEvent=function(n){this.messages[this.messages.length-1].message_status=i.c.Delivered},n.prototype.onMessageReadEvent=function(n){var e=this;this.ngZone.run(function(){if(e.commonService.userDetails.user_id!=n.user_id){e.messages[e.messages.length-1].message_status=i.c.Read;var t=moment().utc().format();t=t.replace("Z",".000Z"),e.messages[e.messages.length-1].date_time=t}})},n.prototype.onFayeConnectDisconnectEvent=function(n){this.isFayeConnected=n,this.isFayeConnected&&this.componentInitialize&&this.refreshData(this.activeChannelId,!1,!1)},n.prototype.setMessageStatuses=function(n){for(var e=0;e<this.messages.length;e++)this.messages[e].message_status=n},n.prototype.appendMessage=function(n,e){var t=this;if(n.message.toString().trim()||[i.d.Image_Message,i.d.File_Message,i.d.Payment_Message].includes(n.message_type))if(n.message_type!=this.MessageTypeEnum.Image_Message||n.image_url.toString().trim())if(n.message_type!=this.MessageTypeEnum.File_Message||n.url.toString().trim()){var l=n.message_status;if(l=void 0===l||l==i.c.Sending&&n.user_id!=this.commonService.userDetails.user_id?i.c.Sent:l,this.isUserTyping=!1,this.isAgentTyping=!1,this.pageIndex=this.pageIndex+1,n.muid&&this.messages_dictionary[n.muid]){for(var s=0;s<this.messages.length;s++)if(this.messages[s].muid==n.muid){this.messages[s]=Object.assign(n,{state:"added",message_status:l,user_type:n.user_id?n.user_type:i.g.Bot});break}}else this.messages.push(Object.assign(n,{state:"added",message_status:l,user_type:n.user_id?n.user_type:i.g.Bot}));n.muid&&(this.messages_dictionary[n.muid]=!0),n.message_type!=this.MessageTypeEnum.Activity_Message&&(n.user_type==this.UserTypeEnum.Agent?this.last_agent_time_index=this.messages.length-1:this.last_customer_time_index=this.messages.length-1),e&&(this.showFloatingBtn=!1,this.cdRef.detectChanges()),setTimeout(function(){e&&t.scrollToBottom()},0)}else console.log("invalid message: ",n);else console.log("invalid message: ",n);else console.log("invalid message: ",n)},n.prototype.detectTyping=function(){var n=this,e=this.isUserTyping;return this.isUserTyping&&this.isTypingTimer&&clearTimeout(this.isTypingTimer),this.isTypingTimer=setTimeout(function(){n.isUserTyping=!1,n.sendTypingStoppedEvent()},4e3),e},n.prototype.onTextarea_keydown=function(n){if(this.commonService.iPadState||(this.commonService.iPadState=!0,this.commonService.postMessageToParentWindow({type:"IosFix",data:!0})),!n.shiftKey&&13==n.keyCode)return this.onSendClick(),this.messageToSend="",this.isUserTyping=!1,!1;this.detectTyping()||this.sendTypingStartEvent()},n.prototype.sendTypingStartEvent=function(){var n=moment().utc().format();n=n.replace("Z",".000Z");var e={message:"",full_name:this.commonService.userDetails.full_name,user_id:this.commonService.userDetails.user_id,date_time:n,is_typing:i.f.Typing_Start,message_type:i.d.Customer_Agent_Message,user_type:i.g.Customer,message_status:i.c.Sending};this.postMessageThroughFaye(e)},n.prototype.sendTypingStoppedEvent=function(){var n=moment().utc().format();n=n.replace("Z",".000Z");var e={message:"",full_name:this.commonService.userDetails.full_name,user_id:this.commonService.userDetails.user_id,date_time:n,is_typing:i.f.Typing_Stopped,message_type:i.d.Customer_Agent_Message,user_type:i.g.Customer,message_status:i.c.Sending};this.postMessageThroughFaye(e)},n.prototype.onAttchmentClick=function(n){n.click(),this.dropup_open=!1},n.prototype.prepareFilesForUpload=function(n){for(var e=0;e<n.target.files.length;e++)this.filesUpload(n.target.files[e],e==n.target.files.length-1)},n.prototype.filesUpload=function(n,e){this.layoutService.filesUpload(n,{channel_id:this.activeChannelId},e)},n.prototype.onTouchStart=function(n){this.lastY=n.touches?n.touches[0].pageY:n.pageY},n.prototype.onTouchMove=function(n,e){var t=n.touches?n.touches[0].pageY:n.pageY;Math.abs(t-this.lastY)<15||(t>this.lastY?(this.direction="down",0==e.scrollTop?(n.stopPropagation(),n.preventDefault(),this.bindEvent(),this.pos=0,this.newIssue=0):this.unbindEvent()):(this.direction="up",e.scrollTop==e.scrollHeight-e.offsetHeight?(n.stopPropagation(),n.preventDefault(),this.pos=0,this.newIssue=0,n.stopImmediatePropagation(),this.bindEvent()):this.unbindEvent()))},n.prototype.bindEvent=function(){document.body.addEventListener("touchmove",this.fn)},n.prototype.fn=function(n){n.preventDefault()},n.prototype.unbindEvent=function(){document.body.removeEventListener("touchmove",this.fn)},n.prototype.onTextAreaBlur=function(n){this.commonService.iPadState=!1,this.commonService.postMessageToParentWindow({type:"IosFix",data:!1})},n.prototype.onTextAreaFocus=function(n){this.commonService.iPadState=!0,this.commonService.postMessageToParentWindow({type:"IosFix",data:!0})},n.prototype.autoGrow=function(n){var e=n.target;e.style.height="10px",e.scrollHeight<100?e.style.height=e.scrollHeight+"px":e.style.height="100px"},n.prototype.appendDefaultMessage=function(){var n=moment().utc().format();n=n.replace("Z",".000Z"),this.messages.push({date_time:n,full_name:this.fuguWidgetService.fuguWidgetData.businessName,message:this.default_message,user_id:-1,user_type:i.g.Bot,message_status:i.c.Read,message_type:i.d.Customer_Agent_Message,content_value:null,values:[],id:null,line_before_feedback:"",line_after_feedback_1:"",line_after_feedback_2:"",comment:"",is_rating_given:0,rating_given:0,total_rating:5,muid:null,default_action_id:null})},n.prototype.ngOnDestroy=function(){this.unbindEvent(),this.alive=!1,this.sendTypingStoppedEvent(),this.fayeService.unsubscribeToActiveChannel(),this.layoutService.active_channel_object={channel_id:null}},n.prototype.selectFormType=function(n,e){if(n){var t={message:this.buttonFields.message,message_id:this.buttonFields.id,values:n,index:this.messages.length?this.messages.length-1:0,app_secret_key:this.fuguWidgetService.fuguWidgetData.appSecretKey,user_id:this.commonService.userDetails.user_id};this.postMessageThroughFaye(t),e.trim()&&(this.messageToSend=e,this.isBotReply=1,this.onSendClick()),this.buttonFields={}}else this.buttonFields={}},n.prototype.openPaymentRequestForm=function(){var n=window.open("/#/payment","_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=100,left=250,width=800,height=600");n.channel_id=JSON.parse(JSON.stringify(this.activeChannelId)),n.widget_data=this.fuguWidgetService.fuguWidgetData},n.prototype.createFayePaymentRequest=function(n){if(console.log(n,this.activeChannelId),n.channel_id==this.activeChannelId){n.custom_action.transaction_id=this.conv_transaction_id,delete n.channel_id;var e=moment().utc().format();e=e.replace("Z",".000Z");var t={message:"",full_name:this.commonService.userDetails.full_name,user_id:this.commonService.userDetails.user_id,date_time:e,is_typing:i.f.Typing_End,message_type:i.d.Payment_Message,user_type:i.g.Customer,message_status:i.c.Sending,index:this.messages.length?this.messages.length-1:0,is_bot_reply:this.isBotReply};t=Object.assign(t,n),this.appendMessage(t,!0),this.postMessageThroughFaye(t),-1==this.activeChannelId&&this.createNewConversation(t),console.log(t)}},n.ctorParameters=function(){return[{type:r.k},{type:r.a},{type:o.a},{type:u.a},{type:s.a},{type:l.G},{type:g.a},{type:l.i}]},n}();console.log("conversation module loaded");var d=function(){return function(){}}(),_=[[".video-action-buttons[_ngcontent-%COMP%]{position:absolute;top:75px;left:0;font-family:Proxima-SBold;z-index:1;width:100%;background:rgba(97,94,99,.95);-webkit-box-shadow:0 1px 4px rgba(0,0,0,.4);box-shadow:0 1px 4px rgba(0,0,0,.4)}.incoming-call[_ngcontent-%COMP%]{color:#fff;text-align:center;line-height:1.4}#buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:relative;padding:7px 30px;margin:.3125rem 20px;font-size:.9rem;font-weight:400;line-height:1.428571;text-decoration:none;text-transform:uppercase;letter-spacing:0;cursor:pointer;background-color:transparent;border:0;border-radius:.2rem;outline:0;-webkit-transition:background-color .2s cubic-bezier(.4,0,.2,1),-webkit-box-shadow .2s cubic-bezier(.4,0,1,1);transition:background-color .2s cubic-bezier(.4,0,.2,1),-webkit-box-shadow .2s cubic-bezier(.4,0,1,1);transition:box-shadow .2s cubic-bezier(.4,0,1,1),background-color .2s cubic-bezier(.4,0,.2,1);transition:box-shadow .2s cubic-bezier(.4,0,1,1),background-color .2s cubic-bezier(.4,0,.2,1),-webkit-box-shadow .2s cubic-bezier(.4,0,1,1);will-change:box-shadow,transform}#buttons[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{cursor:pointer;color:#fff;background-color:#4caf50;border-color:#4caf50}#buttons[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 14px 26px -12px rgba(76,175,80,.42),0 4px 23px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(76,175,80,.2);box-shadow:0 14px 26px -12px rgba(76,175,80,.42),0 4px 23px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(76,175,80,.2)}#buttons[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{cursor:pointer;color:#fff;background-color:#f44336;border-color:#f44336}#buttons[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 14px 26px -12px rgba(244,67,54,.42),0 4px 23px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(244,67,54,.2);box-shadow:0 14px 26px -12px rgba(244,67,54,.42),0 4px 23px 0 rgba(0,0,0,.12),0 8px 10px -5px rgba(244,67,54,.2)}"]],f=l._14({encapsulation:0,styles:_,data:{}});function h(n){return l._40(0,[(n()(),l._17(0,0,null,null,12,"div",[["id","fugu-container"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n  "])),(n()(),l._17(2,0,null,null,0,"div",[["class","d-none"],["id","video-sound"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n  "])),(n()(),l._17(4,0,null,null,0,"div",[["id","sound"],["style","display:none"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n  "])),(n()(),l._38(-1,null,["\n  "])),(n()(),l._17(7,0,null,null,4,"div",[["class","routing-container"],["id","fuguChatsListContainer"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(9,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),l._15(10,212992,null,0,r.m,[r.b,l.Z,l.k,[8,null],l.i],null,null),(n()(),l._38(-1,null,["\n  "])),(n()(),l._38(-1,null,["\n"])),(n()(),l._38(-1,null,["\n"]))],function(n,e){n(e,10,0)},null)}var y=l._12("app-layout",a,function(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"app-layout",[],null,null,null,h,f)),l._15(1,114688,null,0,a,[s.a,o.a,l.i],null,null)],function(n,e){n(e,1,0)},null)},{},{},[]),b=t("2Je8"),v=function(){function n(){}return n.prototype.transform=function(n,e){return void 0===e&&(e=null),n?Object.keys(n):[]},n}(),x=function(){function n(){}return n.prototype.transform=function(n,e){try{if("string"!=typeof n)return n;if(n.indexOf("sheet_apple_64_indexed_128.png")>-1)return n;var t=n.match(/(((https?\:\/\/)|(www\.))(\S([^<\n\s])+))/g);return t&&t.forEach(function(e,t){n=n.replace(e,function(n){return"$a_"+t})}),n=this.phoneNumber(n),t&&t.forEach(function(e,t){var l=e;l.indexOf("http")<0&&l.indexOf("https")<0&&(l=l.replace("www","http://www"));var s="$a_"+t;new RegExp(s,"g");n=n.replace(s,function(n){return'<a target="_blank" href="'+l+'" class="link-color">'+e+"</a>"})}),n.replace(/\n/g,"<br/>")}catch(e){return console.log(e),n}},n.prototype.phoneNumber=function(n){try{if("string"!=typeof n)return n;return n.replace(/([+]?\d{1,2}[.-\s]?)?(\d{3}[.-]?){2}\d{4}/g,"<a href='tel:$&'>$&</a>")}catch(e){return console.log(e),n}},n}(),C=function(){function n(){this.TimSort=t("Rvfx")}return n.prototype.transform=function(n,e){if(void 0===e&&(e=null),n){var t=[];return n.forEach(function(n){t.push(e[n])}),this.TimSort.sort(t,this.Compare),t}},n.prototype.Compare=function(n,e){if(n.channel_id==e.channel_id)return n.channel_priority-e.channel_priority;var t=new Date(n.date_time);return new Date(e.date_time)-t},n}(),k=function(){function n(){this.MMM=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}return n.prototype.transform=function(n,e){void 0===e&&(e=null);var t=new Date(n),l=new Date;l.getFullYear(),l.getMonth(),l.getDate();if(t.getFullYear()==l.getFullYear()&&t.getMonth()==l.getMonth()&&t.getDate()==l.getDate()){var s=t.getHours(),i=t.getMinutes(),o=s>=12?"pm":"am";return(s=(s%=12)||12)+":"+(i=i<10?"0"+i:i)+" "+o}return t.getDate()+" "+this.MMM[t.getMonth()]},n}(),M=[[".conversation[_ngcontent-%COMP%]{padding:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-line-pack:center;align-content:center;border-top:1px solid #f3f4f5;cursor:pointer}.no-chat-div[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.no-conv-text[_ngcontent-%COMP%]{font-family:Proxima-Regular;font-size:19px;font-weight:600;text-align:center;color:#595868;margin-top:15px}.conversation[_ngcontent-%COMP%]:hover{background-color:#f7f8fa}.conversation[_ngcontent-%COMP%]:nth-child(1){border-top:none}.conversations-container[_ngcontent-%COMP%]{border:1px solid #ddd;border-bottom-left-radius:6px;border-bottom-right-radius:6px;overflow:auto}.conversation-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 6px;text-overflow:ellipsis;word-wrap:break-word;word-break:break-all;max-height:17px;overflow:hidden;font-weight:500}.conversation-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;word-break:break-word;max-height:29px;overflow:hidden;text-overflow:ellipsis;max-width:80%}.conversation-header[_ngcontent-%COMP%]   p.sub-title[_ngcontent-%COMP%]{margin:0;font-size:14px;word-break:break-word;max-height:29px;overflow:hidden;text-overflow:clip;max-width:100%;white-space:nowrap}#fugu-messenger-header-div[_ngcontent-%COMP%]{height:50px;background-color:var(--color);-webkit-box-shadow:0 1px 4px rgba(0,0,0,.4);box-shadow:0 1px 4px rgba(0,0,0,.4);z-index:9;display:-webkit-box;display:-ms-flexbox;display:flex;padding:30px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:Proxima-Regular;color:#fff;position:relative;border-top-left-radius:inherit!important;border-top-right-radius:inherit!important}.channel-image[_ngcontent-%COMP%]{width:42px;height:42px;background-color:#ddd;border:2px solid #ddd;border-radius:100%;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:20px;text-transform:uppercase}img.channel-image[_ngcontent-%COMP%]{vertical-align:middle}.btn-new-conversation[_ngcontent-%COMP%]{position:relative;height:45px;padding-left:20px;padding-right:20px;color:#fff;font-size:13px;pointer-events:auto;cursor:pointer;-webkit-box-shadow:0 4px 12px rgba(0,0,0,.1);box-shadow:0 4px 12px rgba(0,0,0,.1);border-radius:40px;background-color:#7e93af;text-align:center;-webkit-transition:-webkit-box-shadow .12s;transition:-webkit-box-shadow .12s;transition:box-shadow .12s;transition:box-shadow .12s,-webkit-box-shadow .12s;-webkit-animation:.42s cubic-bezier(.23,1,.32,1) .16s both new-conversation-fade-in;animation:.42s cubic-bezier(.23,1,.32,1) .16s both new-conversation-fade-in;-webkit-transform:translateY(-30px);transform:translateY(-30px);border:none;will-change:box-shadow;-webkit-box-align:center;-ms-flex-align:center;outline:0!important;display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:-30px}.btn-new-conversation[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;height:15px;margin-right:5px;margin-bottom:3px}.btn-new-conversation[_ngcontent-%COMP%]:hover{-webkit-box-shadow:0 8px 24px rgba(0,0,0,.2);box-shadow:0 8px 24px rgba(0,0,0,.2)}@-webkit-keyframes new-conversation-fade-in{0%{opacity:0;-webkit-transform:translateY(30px);transform:translateY(30px)}100%{opacity:1;-webkit-transform:translateY(-30px);transform:translateY(-30px)}}@keyframes new-conversation-fade-in{0%{opacity:0;-webkit-transform:translateY(30px);transform:translateY(30px)}100%{opacity:1;-webkit-transform:translateY(-30px);transform:translateY(-30px)}}.span-channel-info[_ngcontent-%COMP%]{width:100%}.span-channel-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 6px;text-overflow:ellipsis;word-wrap:break-word;word-break:break-all;max-height:17px;overflow:hidden;font-weight:500}.span-channel-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;word-break:break-word;max-height:29px;overflow:hidden;text-overflow:ellipsis;max-width:80%;color:rgba(73,76,93,.9)}.conv-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;position:relative}.badge[_ngcontent-%COMP%]{display:inline-block;min-width:10px;padding:4px 7px 3px;font-size:12px;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:middle;background-color:#e02a46;border-radius:10px;position:absolute;right:-20px;top:-5px}.date-time[_ngcontent-%COMP%]{position:absolute;right:-20px;font-size:13px;bottom:3px;color:#777}#loader-div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.last-div-conversation[_ngcontent-%COMP%]{padding:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-line-pack:center;align-content:center;border-top:1px solid #f3f4f5;height:101px}.btn-new-conv-div[_ngcontent-%COMP%]{width:100%;height:80px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;justify-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;position:fixed;bottom:0}.btn-new-conv-div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.powered-hippo[_ngcontent-%COMP%]{display:inline-block;font-size:12px;bottom:0;font-family:Proxima-Regular;background-color:#fff;width:100%;text-align:center;padding-bottom:6px}.hippo-link[_ngcontent-%COMP%]{color:grey;text-decoration:none}.hippo-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.hippo[_ngcontent-%COMP%]{font-family:Proxima-Bold;color:#2296ff;font-size:15px}"]],w=l._14({encapsulation:0,styles:M,data:{animation:[{type:7,name:"fadeInCurtain",definitions:[{type:1,expr:"* => *",animation:[{type:11,selector:":leave",animation:[{type:12,timings:32,animation:[{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,offset:0},offset:null},{type:6,styles:{opacity:0,offset:1},offset:null}]},timings:".2s ease"}]}],options:{optional:!0}},{type:11,selector:":enter",animation:[{type:6,styles:{opacity:0},offset:null},{type:12,timings:50,animation:[{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(-8px)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:".32s .16ms cubic-bezier(0.23, 1, 0.32, 1)"}]}],options:{optional:!0}}],options:null}],options:{}},{type:7,name:"fadeOut",definitions:[{type:1,expr:":leave",animation:[{type:6,styles:{opacity:1},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,maxHeight:"100%",offset:0},offset:null},{type:6,styles:{opacity:0,maxHeight:"0",offset:1},offset:null}]},timings:".2s ease"}],options:null}],options:{}}]}});function I(n){return l._40(0,[(n()(),l._17(0,0,null,null,3,"div",[["id","loader-div"]],[[24,"@fadeOut",0]],null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(2,0,null,null,0,"img",[["id","loader-img"],["src","assets/img/ring.gif"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n    "]))],null,function(n,e){n(e,0,0,void 0)})}function S(n){return l._40(0,[(n()(),l._17(0,0,null,null,6,"div",[["class","no-chat-div"]],[[24,"@fadeOut",0]],null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(2,0,null,null,0,"img",[["src","assets/img/no-conversation-found.png"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(4,0,null,null,1,"div",[["class","no-conv-text"]],null,null,null,null,null)),(n()(),l._38(-1,null,["No conversations found"])),(n()(),l._38(-1,null,["\n    "]))],null,function(n,e){n(e,0,0,void 0)})}function P(n){return l._40(0,[(n()(),l._17(0,0,null,null,6,"div",[["class","no-chat-div"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(2,0,null,null,0,"img",[["src","assets/img/no-conversation-found.png"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(4,0,null,null,1,"div",[["class","no-conv-text"]],null,null,null,null,null)),(n()(),l._38(5,null,["",""])),(n()(),l._38(-1,null,["\n    "]))],null,function(n,e){n(e,5,0,e.component.errorMessage)})}function O(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),l._38(1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.conversations[e.parent.context.$implicit.unique_id].message)})}function T(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),l._38(1,null,["\n                ","\n              "]))],null,function(n,e){var t=e.component;n(e,1,0,t.conversations[e.parent.context.$implicit.unique_id].last_sent_by_user_type==t.UserTypeEnum.Customer?"You sent a photo.":"Received a photo")})}function E(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),l._38(1,null,["\n              ","\n            "]))],null,function(n,e){var t=e.component;n(e,1,0,t.conversations[e.parent.context.$implicit.unique_id].last_sent_by_user_type==t.UserTypeEnum.Customer?"You sent a file.":"Received a file")})}function D(n){return l._40(0,[(n()(),l._17(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),l._38(-1,null,["\n              "])),(n()(),l._17(2,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),l._38(-1,null,["Payment Request"])),(n()(),l._38(-1,null,["\n            "]))],null,null)}function F(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"span",[["class","badge"]],null,null,null,null,null)),(n()(),l._38(1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.conversations[e.parent.context.$implicit.unique_id].is_new_count)})}function W(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"span",[["class","badge"]],null,null,null,null,null)),(n()(),l._38(1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.conversations[e.parent.context.$implicit.unique_id].unread_count)})}function A(n){return l._40(0,[(n()(),l._17(0,0,null,null,2,"span",[["class","date-time"]],null,null,null,null,null)),(n()(),l._38(1,null,["",""])),l._34(2,1)],null,function(n,e){var t=e.component;n(e,1,0,l._39(e,1,0,n(e,2,0,l._30(e.parent.parent,2),t.conversations[e.parent.context.$implicit.unique_id].last_updated_at)))})}function z(n){return l._40(0,[(n()(),l._17(0,0,null,null,39,"div",[["class","conversation proxima-regular"]],null,[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.onConversationClick(n.context.$implicit.unique_id)&&l);return l},null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(2,0,null,null,36,"div",[["class","conv-container"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n          "])),(n()(),l._17(4,0,null,null,5,"span",[["class","span-channel-image"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n            "])),(n()(),l._38(-1,null,["\n            "])),(n()(),l._17(7,0,null,null,1,"span",[["class","channel-image"]],null,null,null,null,null)),(n()(),l._38(8,null,["",""])),(n()(),l._38(-1,null,["\n          "])),(n()(),l._38(-1,null,["\n          "])),(n()(),l._17(11,0,null,null,17,"span",[["class","span-channel-info"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n            "])),(n()(),l._17(13,0,null,null,1,"h4",[["class","capitalize"]],null,null,null,null,null)),(n()(),l._38(14,null,["",""])),(n()(),l._38(-1,null,["\n            "])),(n()(),l._11(16777216,null,null,2,null,O)),l._15(17,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),l._31(18,3),(n()(),l._38(-1,null,["\n              "])),(n()(),l._11(16777216,null,null,1,null,T)),l._15(21,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n              "])),(n()(),l._11(16777216,null,null,1,null,E)),l._15(24,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n            "])),(n()(),l._11(16777216,null,null,1,null,D)),l._15(27,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n\n          "])),(n()(),l._38(-1,null,["\n\n          "])),(n()(),l._11(16777216,null,null,1,null,F)),l._15(31,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n          "])),(n()(),l._11(16777216,null,null,1,null,W)),l._15(34,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n          "])),(n()(),l._11(16777216,null,null,1,null,A)),l._15(37,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n        "])),(n()(),l._38(-1,null,["\n\n      "]))],function(n,e){var t=e.component;n(e,17,0,!n(e,18,0,t.MessageTypeEnum.Image_Message,t.MessageTypeEnum.File_Message,t.MessageTypeEnum.Payment_Message).includes(t.conversations[e.context.$implicit.unique_id].message_type)),n(e,21,0,t.conversations[e.context.$implicit.unique_id].message_type==t.MessageTypeEnum.Image_Message),n(e,24,0,t.conversations[e.context.$implicit.unique_id].message_type==t.MessageTypeEnum.File_Message),n(e,27,0,t.conversations[e.context.$implicit.unique_id].message_type==t.MessageTypeEnum.Payment_Message),n(e,31,0,t.conversations[e.context.$implicit.unique_id].is_new_count),n(e,34,0,t.conversations[e.context.$implicit.unique_id].unread_count),n(e,37,0,-1!=t.conversations[e.context.$implicit.unique_id].channel_id)},function(n,e){var t=e.component;n(e,8,0,t.channelAcronym(e.context.$implicit.label)),n(e,14,0,t.conversations[e.context.$implicit.unique_id].label)})}function Z(n){return l._40(0,[(n()(),l._17(0,0,null,null,0,"div",[["class","last-div-conversation proxima-regular"]],null,null,null,null,null))],null,null)}function $(n){return l._40(0,[l._32(0,v,[]),l._32(0,C,[]),l._32(0,k,[]),l._36(402653184,1,{activeChatsContainer:0}),(n()(),l._17(4,0,null,null,57,"div",[["class","fuguCss fugu-messenger"],["id","fugu-messenger"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n  "])),(n()(),l._17(6,0,null,null,25,"div",[["class","proxima-regular"],["id","fugu-messenger-header-div"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(8,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),l._38(-1,null,["this is conversation header"])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(11,0,null,null,17,"div",[["class","header-content"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(13,0,null,null,3,"span",[["class","span-channel-image"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._38(-1,null,["\n        "])),(n()(),l._38(-1,null,["\n      "])),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(18,0,null,null,9,"div",[],null,null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(20,0,null,null,6,"span",[["class","conversation-header"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n          "])),(n()(),l._17(22,0,null,null,1,"h4",[["class","capitalize"]],null,null,null,null,null)),(n()(),l._38(-1,null,["Conversations List"])),(n()(),l._38(-1,null,["\n          "])),(n()(),l._38(-1,null,["\n          "])),(n()(),l._38(-1,null,["\n        "])),(n()(),l._38(-1,null,["\n      "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(30,0,null,null,0,"div",[["class","cancel-btn-header2"]],null,[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.oncrossClick()&&l);return l},null,null)),(n()(),l._38(-1,null,["\n  "])),(n()(),l._38(-1,null,["\n\n\n  "])),(n()(),l._17(33,0,[[1,0],["scrollWidgetChatDiv",1]],null,27,"div",[["class","fuguCss fugu-messenger-main-div conversations-container"],["id","fugu-messenger-main-div"]],null,[[null,"wheel"],[null,"touchmove"],[null,"scroll"]],function(n,e,t){var s=!0,i=n.component;"wheel"===e&&(s=!1!==i.disableScroll(t,l._30(n,33))&&s);"touchmove"===e&&(s=!1!==i.onTouchMove(t,l._30(n,33))&&s);"scroll"===e&&(s=!1!==i.onScroll(t)&&s);return s},null,null)),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,1,null,I)),l._15(36,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,2,null,S)),l._15(40,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),l._34(41,1),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,2,null,P)),l._15(44,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),l._34(45,1),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(47,0,[["activeChatsContainer",1]],null,7,"div",[["id","conv-list-cont"]],[[24,"@fadeInCurtain",0]],null,null,null,null)),l._34(48,1),(n()(),l._38(-1,null,["\n\n      "])),(n()(),l._11(16777216,null,null,3,null,z)),l._15(51,802816,null,0,b.j,[l.Z,l.W,l.y],{ngForOf:[0,"ngForOf"]},null),l._34(52,1),l._34(53,2),(n()(),l._38(-1,null,["\n\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,2,null,Z)),l._15(57,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),l._34(58,1),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n  "])),(n()(),l._38(-1,null,["\n\n"]))],function(n,e){var t=e.component;n(e,36,0,t.showLoader),n(e,40,0,0==l._39(e,40,0,n(e,41,0,l._30(e,0),t.conversations)).length&&!t.showLoader&&!t.showErrorMessage),n(e,44,0,0==l._39(e,44,0,n(e,45,0,l._30(e,0),t.conversations)).length&&!t.showLoader&&t.showErrorMessage),n(e,51,0,l._39(e,51,0,n(e,53,0,l._30(e,1),l._39(e,51,0,n(e,52,0,l._30(e,0),t.conversations)),t.conversations))),n(e,57,0,l._39(e,57,0,n(e,58,0,l._30(e,0),t.conversations)).length>4)},function(n,e){var t=e.component;n(e,47,0,l._39(e,47,0,n(e,48,0,l._30(e,0),t.conversations)).length)})}var L=l._12("app-conversations",p,function(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"app-conversations",[],null,[["document","touchstart"]],function(n,e,t){var s=!0;return"document:touchstart"===e&&(s=!1!==l._30(n,1).onTouchStart(t)&&s),s},$,w)),l._15(1,245760,null,0,p,[o.a,u.a,r.k,s.a,l.i,r.a],null,null)],function(n,e){n(e,1,0)},null)},{},{},[]),R=t("NVOs"),N=function(){function n(n,e){this.el=n,this.renderer=e}return n.prototype.ngOnInit=function(){},n.prototype.ngAfterViewInit=function(){this.renderer.invokeElementMethod(this.el.nativeElement,"focus",[])},n.ctorParameters=function(){return[{type:l.n},{type:l.M}]},n}(),j=function(){function n(n,e){this.el=n,this.renderer=e,this._autofocus=!0}return Object.defineProperty(n.prototype,"autofocus",{set:function(n){this._autofocus=n,this._autofocus&&this.focus()},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){},n.prototype.ngAfterViewInit=function(){this._autofocus&&this.focus()},n.prototype.focus=function(){this.renderer.invokeElementMethod(this.el.nativeElement,"focus",[])},n.ctorParameters=function(){return[{type:l.n},{type:l.M}]},n}(),B=t("PP02"),U=function(){function n(){}return Object.defineProperty(n.prototype,"errorMessage",{get:function(){for(var n in this.control.errors)if(this.control.errors.hasOwnProperty(n)&&this.control.touched)return B.a.getValidatorErrorMessage(n,this.control.errors[n]);return null},enumerable:!0,configurable:!0}),n.ctorParameters=function(){return[]},n}(),Y=l._14({encapsulation:0,styles:["div[_ngcontent-%COMP%] { font-size: 12px; color: red; margin-top: 5px; }"],data:{}});function H(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),l._38(1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.errorMessage)})}function q(n){return l._40(0,[(n()(),l._11(16777216,null,null,1,null,H)),l._15(1,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,1,0,null!==e.component.errorMessage)},null)}l._12("app-control-message",U,function(n){return l._40(0,[(n()(),l._17(0,0,null,null,2,"app-control-message",[],null,null,null,q,Y)),l._35(4608,null,B.a,B.a,[]),l._15(2,49152,null,0,U,[],null,null)],null,null)},{control:"control"},{},[]);var G=function(){function n(n,e,t,s){this.commonService=n,this.fayeService=e,this.fuguWidgetService=t,this.formBuilder=s,this.openMediaPlayer=new l.p,this.MessageTypeEnum=i.d,this.currentIndex=0,this.detailsFields=[],this.rating=-1,this.emojis=[{src:"assets/img/terrible.svg",title:"Terrible",rating:1},{src:"assets/img/bad.svg",title:"Bad",rating:2},{src:"assets/img/okay.svg",title:"Okay",rating:3},{src:"assets/img/good.svg",title:"Good",rating:4},{src:"assets/img/great.svg",title:"Great",rating:5}]}return n.prototype.initForm=function(){switch(this.detailsForm=this.formBuilder.group({inputControl:["",[R.v.required]]}),this.detailsFields[this.currentIndex].type){case"email":this.detailsForm.get("inputControl").setValidators([R.v.required,B.a.emailValidator])}},n.prototype.ngOnInit=function(){switch(this.uuidv4=t("DtRx"),this.messageItem.message_type){case this.MessageTypeEnum.Form_Message:var n=0;for(n=0;n<this.messageItem.content_value[0].questions.length;n++)if(this.appendField(n),!this.messageItem.values[n]){this.currentIndex=n,this.initForm();break}this.currentIndex!=n&&(this.currentIndex=this.detailsFields.length);break;case this.MessageTypeEnum.Feedback_Message:this.rating=this.messageItem.rating_given,this.commentToSend=this.messageItem.comment}},n.prototype.appendField=function(n){var e={value:this.messageItem.values[n]||"",title:this.messageItem.content_value[0].questions[n],type:"string"==this.messageItem.content_value[0].data_type[n]?"text":this.messageItem.content_value[0].data_type[n]};this.detailsFields.push(e)},n.prototype.setDetail=function(n){this.commonService.fireAllErrors(this.detailsForm);var e=this.detailsForm.value.inputControl.trim();if(this.detailsForm.valid&&e){this.messageItem.values.push(e);var t={message_id:this.messageItem.id,values:this.messageItem.values,index:3,app_secret_key:this.fuguWidgetService.fuguWidgetData.appSecretKey,user_id:this.commonService.userDetails.user_id,muid:this.messageItem.muid};if(this.fayeService.sendMessage(t),this.detailsFields[n].value=e,this.currentIndex+1<this.messageItem.content_value[0].questions.length&&this.appendField(this.currentIndex+1),this.currentIndex=n+1,n+1<this.detailsFields.length){var l=this;setTimeout(function(){l.initForm()})}}},n.prototype.openImage=function(n){this.commonService.postMessageToParentWindow({type:"Image",data:n})},n.prototype.selectRating=function(n){this.rating=n},n.prototype.submitRating=function(){if(this.rating>0){moment().utc().format();this.messageItem.is_rating_given=1,this.messageItem.rating_given=this.rating,this.messageItem.comment=this.commentToSend,this.messageItem.user_id=this.commonService.userDetails.user_id,this.messageItem.total_rating=5,this.fayeService.sendMessage(this.messageItem)}},n.prototype.onTextarea_keydown=function(n){if(!n.shiftKey&&13==n.keyCode)return this.submitRating(),!1},n.prototype.autoGrow=function(n){var e=n.target;e.scrollHeight<95?e.style.height=e.scrollHeight+"px":e.style.height="95px"},n.prototype.sendPaymentMessage=function(n,e){console.log({button_info:n,message_data:e.custom_action}),this.commonService.postMessageToParentWindow({type:"PaymentMessage",data:{button_info:n,message_data:e.custom_action}})},n.ctorParameters=function(){return[{type:o.a},{type:s.a},{type:u.a},{type:R.f}]},n}(),V=[[".message-container.user-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message-to-be-send[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff!important}.message-container.agent-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message-to-be-send[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2c2333!important}.image-messages[_ngcontent-%COMP%]{cursor:pointer;background-position:center;background-size:cover;background-repeat:no-repeat;min-width:100px;min-height:100px;max-width:180px;max-height:180px;width:180px;height:180px;margin:0;border:0!important;display:block}.image-messages[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:180px;max-height:180px}p.message-to-be-send[_ngcontent-%COMP%]{margin:0}.detail[_ngcontent-%COMP%]:not(:last-child){margin-bottom:10px}.back-icon[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg);width:14px}.info-text[_ngcontent-%COMP%]{right:0;font-size:11px;bottom:calc(100% - 10px)}p[_ngcontent-%COMP%]{margin:0!important}.emojis-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;padding-bottom:5px}.emoji-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.emoji[_ngcontent-%COMP%]{opacity:.5}.emoji[_ngcontent-%COMP%]:hover{cursor:pointer}.active-emoji[_ngcontent-%COMP%]{opacity:1;-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-transition:all .3s;transition:all .3s}.header[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center}.footer[_ngcontent-%COMP%]{left:0}#actionsContainer[_ngcontent-%COMP%]{bottom:1px;background-color:#f4f7f9;width:calc(100% - 2px);display:-ms-inline-flexbox;display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom-left-radius:6px;border-bottom-right-radius:6px;padding:7px 0 0;border-top:.5px solid #dce0e6}#actionsContainer[_ngcontent-%COMP%]   .textarea-container[_ngcontent-%COMP%]{width:100%;min-height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:distribute;justify-content:space-around}#actionsContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;background-color:transparent;border:0;outline:0;resize:none;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 15px;height:18px;font-size:15px;font-weight:400;line-height:1.33;white-space:pre;white-space:pre-wrap;word-wrap:break-word;-webkit-transition:background-color .2s ease,-webkit-box-shadow .2s ease;transition:background-color .2s ease,box-shadow .2s ease,-webkit-box-shadow .2s ease}.action-buttons[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;width:calc(100% + 2px);-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;bottom:0;margin-top:7px;background-color:#dce0e6}#btn-send[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:0;background-color:transparent;outline:0;cursor:pointer;color:#fff;font-size:16px;padding:10px 0;-webkit-box-flex:1;-ms-flex:1;flex:1;text-align:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.active-component-send[_ngcontent-%COMP%]{background-color:var(--color)}.active-component-send#btn-send[_ngcontent-%COMP%]{color:#fff}.emoji-header[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 15px}.emoji-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:10px}.align-center[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.feedback-container[_ngcontent-%COMP%]{padding-top:5px;color:#000}.feedback-form[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.secondary-header[_ngcontent-%COMP%]{margin-bottom:5px}.comment-container[_ngcontent-%COMP%]{width:100%;text-align:left;word-break:break-all;word-wrap:break-word;padding:0 10px 7px;max-height:33px;overflow-y:auto;overflow-x:hidden}.feedback-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{fill:var(--color)}.default-input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:12px}.default-input[_ngcontent-%COMP%]::-moz-placeholder{font-size:12px}.default-input[_ngcontent-%COMP%]:-ms-input-placeholder{font-size:12px}.default-input[_ngcontent-%COMP%]:-moz-placeholder{font-size:11px}.attachment-icon[_ngcontent-%COMP%]{width:44px}.attachment-img-text[_ngcontent-%COMP%]{color:#fff;padding-top:15px;padding-left:5px;font-size:10px}.attachment-link[_ngcontent-%COMP%]{font-size:14px;word-break:break-word}.video-play-image[_ngcontent-%COMP%]{width:72px!important;height:72px!important}.custom-action-img[_ngcontent-%COMP%]{background-position:center;background-size:cover;background-repeat:no-repeat;width:100%;height:150px;border-top-left-radius:10px;border-top-right-radius:10px}p.custom-action-description-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{right:0;float:right;word-break:break-word}p.custom-action-description-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{max-width:50%;display:inline-block;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;word-break:initial;font-weight:700}p.custom-action-description-item[_ngcontent-%COMP%]{margin:0 0 5px!important}p.custom-action-title[_ngcontent-%COMP%]{font-size:14px!important;margin:0;padding:12px 10px .25rem;border-bottom:1px solid #e4e4ed;color:#fff}.custom-action-title-payment[_ngcontent-%COMP%]{color:#2c2333;display:inline-block;font-size:13px;margin:0;padding:10px}button.custom-action-action_buttons-item[_ngcontent-%COMP%]{border:0;padding:10px 0;border-right:1px solid #eee;background-color:transparent;outline:0}div.custom-action-action_buttons[_ngcontent-%COMP%]{border-top:1px solid #eee;margin:0}div.custom-action-description[_ngcontent-%COMP%]{padding:.25rem 10px 0;font-size:13px}div.body-div[_ngcontent-%COMP%]{background-color:#fff}p.custom-action-title-description[_ngcontent-%COMP%]{font-size:13px!important;margin:0;padding:0 10px 8px;font-weight:300}.custom-action-message[_ngcontent-%COMP%], .payment-message[_ngcontent-%COMP%]{color:#2c2333}.custom-action-message[_ngcontent-%COMP%]   button.custom-action-action_buttons-item[_ngcontent-%COMP%]{border:0;padding:10px 0;background-color:#fff;-webkit-box-shadow:0 1px 4px rgba(0,0,0,.1);box-shadow:0 1px 4px rgba(0,0,0,.1)}.custom-action-message[_ngcontent-%COMP%]   button.custom-action-action_buttons-item[_ngcontent-%COMP%]:last-child, button.custom-action-action_buttons-item[_ngcontent-%COMP%]:last-child{border-right:none!important}.custom-action-message[_ngcontent-%COMP%]   .body-div[_ngcontent-%COMP%]{background-color:transparent}.custom-action-message[_ngcontent-%COMP%]   .custom-action-title[_ngcontent-%COMP%]{border-bottom:none;font-size:14px!important;margin:0;padding:4px 10px .3rem;font-family:Proxima-SBold}.custom-action-message[_ngcontent-%COMP%]   .custom-action-action_buttons[_ngcontent-%COMP%]{border-top:none}.opacity-5[_ngcontent-%COMP%]{opacity:.5}.flex-wrap[_ngcontent-%COMP%]{-ms-flex-wrap:wrap;flex-wrap:wrap}.payment-btn[_ngcontent-%COMP%]{background-color:var(--color)!important;color:#fff!important;border-radius:9px}"]],J=l._14({encapsulation:0,styles:V,data:{}});function X(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"p",[["class","rel"]],[[8,"innerHTML",1]],null,null,null,null)),l._34(1,1)],null,function(n,e){var t=e.component;n(e,0,0,l._39(e,0,0,n(e,1,0,l._30(e.parent,0),t.messageItem.message)))})}function K(n){return l._40(0,[(n()(),l._17(0,0,null,null,3,"span",[["class","image-messages message-to-be-send"]],null,[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.openImage(s.messageItem.image_url)&&l);return l},null,null)),l._15(1,278528,null,0,b.n,[l.z,l.n,l.M],{ngStyle:[0,"ngStyle"]},null),l._33(2,{"background-image":0,"text-decoration":1}),(n()(),l._38(-1,null,["\n"]))],function(n,e){n(e,1,0,n(e,2,0,"url("+e.component.messageItem.thumbnail_url+")","none"))},null)}function Q(n){return l._40(0,[(n()(),l._17(0,0,null,null,2,"div",[["class","custom-action-img"]],null,null,null,null,null)),l._15(1,278528,null,0,b.n,[l.z,l.n,l.M],{ngStyle:[0,"ngStyle"]},null),l._33(2,{"background-image":0})],function(n,e){n(e,1,0,n(e,2,0,"url("+e.component.messageItem.custom_action.image_url+")"))},null)}function nn(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"p",[["class","custom-action-title-payment pb-1"]],null,null,null,null,null)),(n()(),l._38(1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.messageItem.custom_action.title)})}function en(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"p",[["class","custom-action-title-description"]],null,null,null,null,null)),(n()(),l._38(1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.messageItem.custom_action.title_description)})}function tn(n){return l._40(0,[(n()(),l._17(0,0,null,null,7,"p",[["class","custom-action-description-item d-flex"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(2,0,null,null,1,"span",[["class","mr-3"]],null,null,null,null,null)),(n()(),l._38(3,null,["",""])),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(5,0,null,null,1,"span",[["class","payment-content"]],null,null,null,null,null)),(n()(),l._38(6,null,["",""])),(n()(),l._38(-1,null,["\n      "]))],null,function(n,e){n(e,3,0,e.context.$implicit.header),n(e,6,0,e.context.$implicit.content)})}function ln(n){return l._40(0,[(n()(),l._17(0,0,null,null,4,"div",[["class","custom-action-description"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._11(16777216,null,null,1,null,tn)),l._15(3,802816,null,0,b.j,[l.Z,l.W,l.y],{ngForOf:[0,"ngForOf"]},null),(n()(),l._38(-1,null,["\n    "]))],function(n,e){n(e,3,0,e.component.messageItem.custom_action.description)},null)}function sn(n){return l._40(0,[(n()(),l._17(0,0,null,null,3,"button",[["class","custom-action-action_buttons-item w-100 payment-btn m-1"]],null,[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==(s.messageItem.user_id!=s.commonService.userDetails.user_id?s.sendPaymentMessage(n.context.$implicit,s.messageItem):"")&&l);return l},null,null)),l._15(1,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l._33(2,{"cursor-hand":0}),(n()(),l._38(3,null,["\n        ","\n      "]))],function(n,e){var t=e.component;n(e,1,0,"custom-action-action_buttons-item w-100 payment-btn m-1",n(e,2,0,t.messageItem.user_id!=t.commonService.userDetails.user_id))},function(n,e){n(e,3,0,e.context.$implicit.button_text)})}function on(n){return l._40(0,[(n()(),l._17(0,0,null,null,4,"div",[["class","custom-action-action_buttons d-flex"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._11(16777216,null,null,1,null,sn)),l._15(3,802816,null,0,b.j,[l.Z,l.W,l.y],{ngForOf:[0,"ngForOf"]},null),(n()(),l._38(-1,null,["\n    "]))],function(n,e){n(e,3,0,e.component.messageItem.custom_action.action_buttons)},null)}function an(n){return l._40(0,[(n()(),l._17(0,0,null,null,19,"div",[["class","payment-message"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n  "])),(n()(),l._11(16777216,null,null,1,null,Q)),l._15(3,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n  "])),(n()(),l._17(5,0,null,null,13,"div",[["class","body-div"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,1,null,nn)),l._15(8,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,1,null,en)),l._15(11,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,1,null,ln)),l._15(14,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,1,null,on)),l._15(17,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n  "])),(n()(),l._38(-1,null,["\n"]))],function(n,e){var t=e.component;n(e,3,0,t.messageItem.custom_action.image_url),n(e,8,0,t.messageItem.custom_action.title),n(e,11,0,t.messageItem.custom_action.title_description),n(e,14,0,t.messageItem.custom_action.description),n(e,17,0,t.messageItem.custom_action.action_buttons)},null)}function un(n){return l._40(0,[(n()(),l._17(0,0,null,null,3,"button",[["class","custom-action-action_buttons-item w-100 mb-2 opacity-5"]],null,null,null,null,null)),l._15(1,278528,null,0,b.n,[l.z,l.n,l.M],{ngStyle:[0,"ngStyle"]},null),l._33(2,{backgroundColor:0,color:1}),(n()(),l._38(3,null,["\n        ","\n      "]))],function(n,e){var t=e.component;n(e,1,0,n(e,2,0,t.messageItem.selected_btn_id!=e.context.$implicit.btn_id?e.context.$implicit.btn_color:e.context.$implicit.btn_selected_color,t.messageItem.selected_btn_id!=e.context.$implicit.btn_id?e.context.$implicit.btn_title_color:e.context.$implicit.btn_title_selected_color))},function(n,e){n(e,3,0,e.context.$implicit.btn_title)})}function rn(n){return l._40(0,[(n()(),l._17(0,0,null,null,13,"div",[["class","custom-action-message"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n  "])),(n()(),l._17(2,0,null,null,10,"div",[["class","body-div"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(4,0,null,null,1,"p",[["class","custom-action-title pb-1"]],null,null,null,null,null)),(n()(),l._38(5,null,["",""])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(7,0,null,null,4,"div",[["class","custom-action-action_buttons d-flex flex-wrap"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._11(16777216,null,null,1,null,un)),l._15(10,802816,null,0,b.j,[l.Z,l.W,l.y],{ngForOf:[0,"ngForOf"]},null),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n  "])),(n()(),l._38(-1,null,["\n"]))],function(n,e){n(e,10,0,e.component.messageItem.content_value)},function(n,e){n(e,5,0,e.component.messageItem.message)})}function cn(n){return l._40(0,[(n()(),l._17(0,0,null,null,6,"div",[["class","position-relative d-flex align-items-center justify-content-start"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(2,0,null,null,0,"img",[["alt","download-icon"],["class","float-right cursor-hand attachment-icon"],["src","assets/img/download-icon.png"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(4,0,null,null,1,"span",[["class","position-absolute attachment-img-text"]],null,null,null,null,null)),(n()(),l._38(5,null,["","\n    "])),(n()(),l._38(-1,null,["\n    "]))],null,function(n,e){var t=e.component;n(e,5,0,t.messageItem.file_name.split(".")[t.messageItem.file_name.split(".").length-1]&&t.messageItem.file_name.split(".").length>1?t.messageItem.file_name.split(".")[t.messageItem.file_name.split(".").length-1].toUpperCase():"FILE")})}function pn(n){return l._40(0,[(n()(),l._17(0,0,null,null,7,"div",[["class","d-flex align-items-center"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,1,null,cn)),l._15(3,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(5,0,null,null,1,"a",[["class","attachment-link d-flex outline-none pl-1 overflow-hidden"],["rel","noopener noreferrer"],["target","_blank"]],[[8,"href",4]],null,null,null,null)),(n()(),l._38(6,null,["\n      ","\n    "])),(n()(),l._38(-1,null,["\n  "]))],function(n,e){n(e,3,0,e.component.messageItem.file_name)},function(n,e){var t=e.component;n(e,5,0,t.messageItem.url),n(e,6,0,t.messageItem.file_name)})}function gn(n){return l._40(0,[(n()(),l._17(0,0,null,null,5,"div",[["class","d-flex justify-content-center align-items-center image-messages message-to-be-send position-relative"]],null,[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.openMediaPlayer.emit({is_open:!0,message_data:s.messageItem})&&l);return l},null,null)),l._15(1,278528,null,0,b.n,[l.z,l.n,l.M],{ngStyle:[0,"ngStyle"]},null),l._33(2,{"background-image":0}),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(4,0,null,null,0,"img",[["class","position-absolute video-play-image"],["src","assets/img/video-play.svg"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n  "]))],function(n,e){n(e,1,0,n(e,2,0,"url("+e.component.messageItem.thumbnail_url+")"))},null)}function mn(n){return l._40(0,[(n()(),l._17(0,0,null,null,7,"div",[["class","message-to-be-send"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n  "])),(n()(),l._11(16777216,null,null,1,null,pn)),l._15(3,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n  "])),(n()(),l._11(16777216,null,null,1,null,gn)),l._15(6,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n"]))],function(n,e){var t=e.component;n(e,3,0,"video"!=t.messageItem.document_type),n(e,6,0,"video"==t.messageItem.document_type)},null)}function dn(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"span",[["class","info-text abs input-title"]],null,null,null,null,null)),(n()(),l._38(1,null,["("," of ",")"]))],null,function(n,e){var t=e.component;n(e,1,0,t.currentIndex+1,t.messageItem.content_value[0].questions.length)})}function _n(n){return l._40(0,[(n()(),l._17(0,0,null,null,18,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(2,0,null,null,1,"label",[["class","input-title"]],null,null,null,null,null)),(n()(),l._38(3,null,["",""])),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(5,0,null,null,12,"div",[["class","group-addon-container rel"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(7,0,null,null,5,"input",[["class","default-input"],["disabled",""]],[[8,"type",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,e,t){var s=!0;"input"===e&&(s=!1!==l._30(n,8)._handleInput(t.target.value)&&s);"blur"===e&&(s=!1!==l._30(n,8).onTouched()&&s);"compositionstart"===e&&(s=!1!==l._30(n,8)._compositionStart()&&s);"compositionend"===e&&(s=!1!==l._30(n,8)._compositionEnd(t.target.value)&&s);"ngModelChange"===e&&(s=!1!==(n.parent.context.$implicit.value=t)&&s);return s},null,null)),l._15(8,16384,null,0,R.c,[l.N,l.n,[2,R.a]],null,null),l._35(1024,null,R.m,function(n){return[n]},[R.c]),l._15(10,671744,null,0,R.r,[[8,null],[8,null],[8,null],[2,R.m]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l._35(2048,null,R.n,null,[R.r]),l._15(12,16384,null,0,R.o,[R.n],null,null),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(14,0,null,null,2,"span",[["class","group-addon abs right-aligned"]],null,null,null,null,null)),(n()(),l._17(15,0,null,null,1,"button",[["class","btn btn-white btn-checked btn-nohover"],["type","button"]],[[8,"disabled",0]],null,null,null,null)),(n()(),l._17(16,0,null,null,0,"img",[["src","assets/img/check-mark.png"],["style","width: 16px"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._38(-1,null,["\n    "]))],function(n,e){n(e,10,0,!0,e.parent.context.$implicit.value)},function(n,e){n(e,3,0,e.parent.context.$implicit.title+("phone"==e.parent.context.$implicit.type?" (with country code)":"")),n(e,7,0,l._20(1,"",e.parent.context.$implicit.type,""),l._30(e,12).ngClassUntouched,l._30(e,12).ngClassTouched,l._30(e,12).ngClassPristine,l._30(e,12).ngClassDirty,l._30(e,12).ngClassValid,l._30(e,12).ngClassInvalid,l._30(e,12).ngClassPending);n(e,15,0,!0)})}function fn(n){return l._40(0,[(n()(),l._17(0,0,null,null,24,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n          "])),(n()(),l._17(2,0,null,null,1,"label",[["class","input-title"]],null,null,null,null,null)),(n()(),l._38(3,null,["",""])),(n()(),l._38(-1,null,["\n          "])),(n()(),l._17(5,0,null,null,14,"div",[["class","group-addon-container rel"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n            "])),(n()(),l._17(7,0,null,null,7,"input",[["autofocus",""],["class","default-input"],["disabled",""],["formControlName","inputControl"]],[[8,"placeholder",0],[8,"type",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,e,t){var s=!0;"input"===e&&(s=!1!==l._30(n,9)._handleInput(t.target.value)&&s);"blur"===e&&(s=!1!==l._30(n,9).onTouched()&&s);"compositionstart"===e&&(s=!1!==l._30(n,9)._compositionStart()&&s);"compositionend"===e&&(s=!1!==l._30(n,9)._compositionEnd(t.target.value)&&s);return s},null,null)),l._15(8,4276224,null,0,N,[l.n,l.M],null,null),l._15(9,16384,null,0,R.c,[l.N,l.n,[2,R.a]],null,null),l._35(1024,null,R.m,function(n){return[n]},[R.c]),l._15(11,671744,null,0,R.h,[[3,R.b],[8,null],[8,null],[2,R.m]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),l._35(2048,null,R.n,null,[R.h]),l._15(13,16384,null,0,R.o,[R.n],null,null),l._15(14,4276224,null,0,j,[l.n,l.M],null,null),(n()(),l._38(-1,null,["\n            "])),(n()(),l._17(16,0,null,null,2,"span",[["class","group-addon abs right-aligned"]],null,null,null,null,null)),(n()(),l._17(17,0,null,null,1,"button",[["class","btn btn-nohover"],["type","submit"]],[[8,"disabled",0]],[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.setDetail(n.parent.parent.context.index)&&l);return l},null,null)),(n()(),l._17(18,0,null,null,0,"img",[["class","back-icon"],["src","assets/img/backArrow.svg"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n          "])),(n()(),l._38(-1,null,["\n          "])),(n()(),l._17(21,0,null,null,2,"app-control-message",[],null,null,null,q,Y)),l._35(4608,null,B.a,B.a,[]),l._15(23,49152,null,0,U,[],{control:[0,"control"]},null),(n()(),l._38(-1,null,["\n        "]))],function(n,e){var t=e.component;n(e,8,0);n(e,11,0,"inputControl",""),n(e,14,0),n(e,23,0,t.detailsForm.controls.inputControl)},function(n,e){n(e,3,0,e.parent.parent.context.$implicit.title+("phone"==e.parent.parent.context.$implicit.type?" (with country code)":"")),n(e,7,0,l._20(1,"",e.parent.parent.context.$implicit.title,""),l._20(1,"",e.parent.parent.context.$implicit.type,""),l._30(e,13).ngClassUntouched,l._30(e,13).ngClassTouched,l._30(e,13).ngClassPristine,l._30(e,13).ngClassDirty,l._30(e,13).ngClassValid,l._30(e,13).ngClassInvalid,l._30(e,13).ngClassPending);n(e,17,0,!0)})}function hn(n){return l._40(0,[(n()(),l._17(0,0,null,null,11,"div",[],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(2,0,null,null,8,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,e,t){var s=!0;"submit"===e&&(s=!1!==l._30(n,4).onSubmit(t)&&s);"reset"===e&&(s=!1!==l._30(n,4).onReset()&&s);return s},null,null)),l._15(3,16384,null,0,R.y,[],null,null),l._15(4,540672,null,0,R.j,[[8,null],[8,null]],{form:[0,"form"]},null),l._35(2048,null,R.b,null,[R.j]),l._15(6,16384,null,0,R.p,[R.b],null,null),(n()(),l._38(-1,null,["\n        "])),(n()(),l._11(16777216,null,null,1,null,fn)),l._15(9,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n      "])),(n()(),l._38(-1,null,["\n    "]))],function(n,e){var t=e.component;n(e,4,0,t.detailsForm),n(e,9,0,!e.parent.context.$implicit.value&&t.currentIndex==e.parent.context.index)},function(n,e){n(e,2,0,l._30(e,6).ngClassUntouched,l._30(e,6).ngClassTouched,l._30(e,6).ngClassPristine,l._30(e,6).ngClassDirty,l._30(e,6).ngClassValid,l._30(e,6).ngClassInvalid,l._30(e,6).ngClassPending)})}function yn(n){return l._40(0,[(n()(),l._17(0,0,null,null,7,"div",[["class","detail"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,1,null,_n)),l._15(3,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,1,null,hn)),l._15(6,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n  "]))],function(n,e){var t=e.component;n(e,3,0,e.context.$implicit.value&&t.currentIndex>e.context.index),n(e,6,0,t.detailsForm)},null)}function bn(n){return l._40(0,[(n()(),l._17(0,0,null,null,7,"div",[["class","details-container rel"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n  "])),(n()(),l._11(16777216,null,null,1,null,dn)),l._15(3,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n  "])),(n()(),l._11(16777216,null,null,1,null,yn)),l._15(6,802816,null,0,b.j,[l.Z,l.W,l.y],{ngForOf:[0,"ngForOf"]},null),(n()(),l._38(-1,null,["\n"]))],function(n,e){var t=e.component;n(e,3,0,t.currentIndex<t.messageItem.content_value[0].questions.length&&t.messageItem.content_value[0].questions.length>1),n(e,6,0,t.detailsFields)},null)}function vn(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"div",[["class","header"]],null,null,null,null,null)),(n()(),l._38(1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.messageItem.line_before_feedback)})}function xn(n){return l._40(0,[(n()(),l._17(0,0,null,null,2,"div",[["class","header emoji-header"]],null,null,null,null,null)),(n()(),l._38(1,null,["",""])),(n()(),l._17(2,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,e){var t=e.component;n(e,1,0,t.messageItem.line_after_feedback_1),n(e,2,0,l._20(1,"",t.emojis[t.messageItem.rating_given-1].src,""))})}function Cn(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"div",[["class","secondary-header"]],null,null,null,null,null)),(n()(),l._38(1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.messageItem.line_after_feedback_2)})}function kn(n){return l._40(0,[(n()(),l._17(0,0,null,null,8,"div",[["class","emoji"]],null,null,null,null,null)),l._15(1,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l._33(2,{"active-emoji":0}),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(4,0,null,null,3,"div",[["class","emoji-container"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(6,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._38(-1,null,["\n    "]))],function(n,e){n(e,1,0,"emoji",n(e,2,0,e.component.rating==e.context.index+1))},function(n,e){n(e,6,0,l._20(1,"",e.context.$implicit.src,""))})}function Mn(n){return l._40(0,[(n()(),l._17(0,0,null,null,4,"div",[["class","emojis-container"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,1,null,kn)),l._15(3,802816,null,0,b.j,[l.Z,l.W,l.y],{ngForOf:[0,"ngForOf"]},null),(n()(),l._38(-1,null,["\n  "]))],function(n,e){n(e,3,0,e.component.emojis)},null)}function wn(n){return l._40(0,[(n()(),l._17(0,0,null,null,8,"div",[["class","textarea-container"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n          "])),(n()(),l._17(2,0,null,null,5,"textarea",[["disabled",""],["id","textarea-send-message"],["name","textarea"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"keydown"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,e,t){var s=!0,i=n.component;"input"===e&&(s=!1!==l._30(n,3)._handleInput(t.target.value)&&s);"blur"===e&&(s=!1!==l._30(n,3).onTouched()&&s);"compositionstart"===e&&(s=!1!==l._30(n,3)._compositionStart()&&s);"compositionend"===e&&(s=!1!==l._30(n,3)._compositionEnd(t.target.value)&&s);"keyup"===e&&(s=!1!==i.autoGrow(t)&&s);"keydown"===e&&(s=!1!==i.onTextarea_keydown(t)&&s);"ngModelChange"===e&&(s=!1!==(i.commentToSend=t)&&s);return s},null,null)),l._15(3,16384,null,0,R.c,[l.N,l.n,[2,R.a]],null,null),l._35(1024,null,R.m,function(n){return[n]},[R.c]),l._15(5,671744,null,0,R.r,[[2,R.b],[8,null],[8,null],[2,R.m]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),l._35(2048,null,R.n,null,[R.r]),l._15(7,16384,null,0,R.o,[R.n],null,null),(n()(),l._38(-1,null,["\n        "]))],function(n,e){var t=e.component;n(e,5,0,"textarea",t.messageItem.rating_given>0,t.commentToSend)},function(n,e){var t=e.component;n(e,2,0,l._20(1,"",t.messageItem.rating_given>0?t.messageItem.comment||"No comment...":"Tell us more...",""),l._30(e,7).ngClassUntouched,l._30(e,7).ngClassTouched,l._30(e,7).ngClassPristine,l._30(e,7).ngClassDirty,l._30(e,7).ngClassValid,l._30(e,7).ngClassInvalid,l._30(e,7).ngClassPending)})}function In(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"div",[["class","comment-container"]],null,null,null,null,null)),(n()(),l._38(1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.messageItem.comment)})}function Sn(n){return l._40(0,[(n()(),l._17(0,0,null,null,6,"div",[["class","action-buttons"]],null,null,null,null,null)),l._15(1,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l._33(2,{"active-component-send":0}),(n()(),l._38(-1,null,["\n          "])),(n()(),l._17(4,0,null,null,1,"button",[["class","feedback-btn"],["id","btn-send"],["type","submit"]],[[8,"disabled",0]],[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.submitRating()&&l);return l},null,null)),(n()(),l._38(-1,null,["\n            SUBMIT\n          "])),(n()(),l._38(-1,null,["\n        "]))],function(n,e){n(e,1,0,"action-buttons",n(e,2,0,e.component.rating>0))},function(n,e){n(e,4,0,e.component.messageItem.rating_given>0)})}function Pn(n){return l._40(0,[(n()(),l._17(0,0,null,null,20,"div",[["class","footer"],["id","actionsContainer"]],null,null,null,null,null)),l._15(1,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l._33(2,{"white-bg":0}),(n()(),l._38(-1,null,["\n      "])),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(5,0,null,null,14,"form",[["class","feedback-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,e,t){var s=!0;"submit"===e&&(s=!1!==l._30(n,7).onSubmit(t)&&s);"reset"===e&&(s=!1!==l._30(n,7).onReset()&&s);return s},null,null)),l._15(6,16384,null,0,R.y,[],null,null),l._15(7,16384,null,0,R.q,[[8,null],[8,null]],null,null),l._35(2048,null,R.b,null,[R.q]),l._15(9,16384,null,0,R.p,[R.b],null,null),(n()(),l._38(-1,null,["\n        "])),(n()(),l._11(16777216,null,null,1,null,wn)),l._15(12,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n        "])),(n()(),l._11(16777216,null,null,1,null,In)),l._15(15,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n        "])),(n()(),l._11(16777216,null,null,1,null,Sn)),l._15(18,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n      "])),(n()(),l._38(-1,null,["\n\n\n  "]))],function(n,e){var t=e.component;n(e,1,0,"footer",n(e,2,0,!t.messageItem.is_rating_given)),n(e,12,0,!t.messageItem.is_rating_given),n(e,15,0,t.messageItem.is_rating_given),n(e,18,0,t.messageItem.rating_given<=0)},function(n,e){n(e,5,0,l._30(e,9).ngClassUntouched,l._30(e,9).ngClassTouched,l._30(e,9).ngClassPristine,l._30(e,9).ngClassDirty,l._30(e,9).ngClassValid,l._30(e,9).ngClassInvalid,l._30(e,9).ngClassPending)})}function On(n){return l._40(0,[(n()(),l._17(0,0,null,null,18,"div",[["class","feedback-container"]],null,null,null,null,null)),l._15(1,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l._33(2,{"align-center":0,"pad-bot":1}),(n()(),l._38(-1,null,["\n  "])),(n()(),l._11(16777216,null,null,1,null,vn)),l._15(5,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n  "])),(n()(),l._11(16777216,null,null,1,null,xn)),l._15(8,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n  "])),(n()(),l._11(16777216,null,null,1,null,Cn)),l._15(11,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n  "])),(n()(),l._11(16777216,null,null,1,null,Mn)),l._15(14,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n  "])),(n()(),l._11(16777216,null,null,1,null,Pn)),l._15(17,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n"]))],function(n,e){var t=e.component;n(e,1,0,"feedback-container",n(e,2,0,t.messageItem.rating_given>0,t.messageItem.is_rating_given&&t.messageItem.comment||!t.messageItem.is_rating_given)),n(e,5,0,t.messageItem.rating_given<=0),n(e,8,0,t.messageItem.rating_given>0),n(e,11,0,t.messageItem.rating_given>0),n(e,14,0,t.messageItem.rating_given<=0),n(e,17,0,t.messageItem.is_rating_given&&t.messageItem.comment||!t.messageItem.is_rating_given)},null)}function Tn(n){return l._40(0,[l._32(0,x,[]),(n()(),l._11(16777216,null,null,1,null,X)),l._15(2,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n"])),(n()(),l._11(16777216,null,null,1,null,K)),l._15(5,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n"])),(n()(),l._11(16777216,null,null,1,null,an)),l._15(8,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n"])),(n()(),l._11(16777216,null,null,1,null,rn)),l._15(11,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n"])),(n()(),l._11(16777216,null,null,1,null,mn)),l._15(14,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n\n"])),(n()(),l._11(16777216,null,null,1,null,bn)),l._15(17,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n"])),(n()(),l._11(16777216,null,null,1,null,On)),l._15(20,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n"]))],function(n,e){var t=e.component;n(e,2,0,t.messageItem.message_type!=t.MessageTypeEnum.Image_Message&&t.messageItem.message_type!=t.MessageTypeEnum.Form_Message&&t.messageItem.message_type!=t.MessageTypeEnum.Feedback_Message&&t.messageItem.message_type!=t.MessageTypeEnum.Custom_Action_Message),n(e,5,0,t.messageItem.message_type==t.MessageTypeEnum.Image_Message),n(e,8,0,t.messageItem.message_type==t.MessageTypeEnum.Payment_Message),n(e,11,0,t.messageItem.message_type==t.MessageTypeEnum.Custom_Action_Message),n(e,14,0,t.messageItem.message_type==t.MessageTypeEnum.File_Message),n(e,17,0,t.messageItem.message_type==t.MessageTypeEnum.Form_Message),n(e,20,0,t.messageItem.message_type==t.MessageTypeEnum.Feedback_Message)},null)}var En;l._12("app-message-content",G,function(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"app-message-content",[],null,null,null,Tn,J)),l._15(1,114688,null,0,G,[o.a,s.a,u.a,R.f],null,null)],function(n,e){n(e,1,0)},null)},{messageItem:"messageItem"},{openMediaPlayer:"openMediaPlayer"},[]);!function(n){n[n.ESC=27]="ESC",n[n.SPACE=32]="SPACE"}(En||(En={}));var Dn=function(){function n(n){this.commonService=n,this.supportedVideoPlayerExtensions=["mp4","mov","ogg","webm"],this.closePlayer=new l.p}return n.prototype.keyEvent=function(n){n.keyCode===En.ESC&&this.onCloseClick(),n.keyCode===En.SPACE&&this.playVideo(n)},n.prototype.ngOnInit=function(){var n=this.messageData.file_name.split(".");this.messageData.message_extension=n[n.length-1].toLowerCase()},n.prototype.ngOnDestroy=function(){this.messageData={}},n.prototype.onCloseClick=function(){this.closePlayer.emit(!1)},n.prototype.playVideo=function(n){n.stopPropagation(),n.preventDefault();var e=document.getElementById("video-player");e&&(e.paused?e.play():e.pause())},n.ctorParameters=function(){return[{type:o.a}]},n}(),Fn=[[".carousel-parent[_ngcontent-%COMP%]{position:fixed;width:100%;z-index:2000;top:0;left:0;background-color:rgba(255,255,255,.95)}.carousel-header[_ngcontent-%COMP%]{height:60px}.nav-icons[_ngcontent-%COMP%]{font-size:40px;color:#000}.top-icons[_ngcontent-%COMP%]{-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center;margin-left:auto;margin-right:15px}.thumb-image[_ngcontent-%COMP%]{max-height:60px;border:1px solid transparent;-webkit-transition:all .3s;transition:all .3s;min-width:calc(100%/11.35);display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-item-align:center;align-self:center;-o-object-fit:cover;object-fit:cover}.top-icon[_ngcontent-%COMP%]{margin-top:-4px;width:20px}.download-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.attachment-file[_ngcontent-%COMP%]{height:auto;margin-bottom:1rem;margin-top:15%}.attachment-audio[_ngcontent-%COMP%]{height:auto;margin-bottom:1rem;margin-top:10%}.hide-nav[_ngcontent-%COMP%]{visibility:hidden}"]],Wn=l._14({encapsulation:0,styles:Fn,data:{}});function An(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"div",[["class","text-center"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n        We don't support this video, but you can download the video from above download icon.\n      "]))],null,null)}function zn(n){return l._40(0,[(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(1,0,null,null,5,"video",[["class","d-flex align-self-center mt-4"],["controls",""],["height","90%"],["id","video-player"],["width","90%"]],null,[[null,"click"]],function(n,e,t){var l=!0;"click"===e&&(l=!1!==t.stopPropagation()&&l);return l},null,null)),(n()(),l._38(-1,null,["\n          "])),(n()(),l._17(3,0,null,null,0,"source",[["type","video/mp4"]],[[8,"src",4]],null,null,null,null)),(n()(),l._38(-1,null,["\n          "])),(n()(),l._17(5,0,null,null,0,"source",[["type","video/ogg"]],[[8,"src",4]],null,null,null,null)),(n()(),l._38(-1,null,["\n          Your browser does not support the video tag.\n        "])),(n()(),l._38(-1,null,["\n      "]))],null,function(n,e){var t=e.component;n(e,3,0,t.messageData.url),n(e,5,0,t.messageData.url)})}function Zn(n){return l._40(0,[(n()(),l._17(0,0,null,null,6,"div",[["class","d-flex flex-column\n                   align-items-center justify-content-center h-100 w-100"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._11(16777216,null,null,1,null,An)),l._15(3,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),l._38(-1,null,["\n      "])),(n()(),l._11(0,[["videoFromChat",2]],null,0,null,zn)),(n()(),l._38(-1,null,["\n    "]))],function(n,e){var t=e.component;n(e,3,0,!t.supportedVideoPlayerExtensions.includes(t.messageData.message_extension),l._30(e,5))},null)}function $n(n){return l._40(2,[(n()(),l._17(0,0,null,null,38,"div",[["class","h-100 d-flex flex-column carousel-parent"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n  "])),(n()(),l._17(2,0,null,null,11,"div",[["class","carousel-header d-flex"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(4,0,null,null,8,"div",[["class","top-icons"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(6,0,null,null,3,"a",[["class","download-link mr-4"],["download",""]],[[8,"href",4]],null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(8,0,null,null,0,"img",[["alt","download-btn"],["class","top-icon"],["src","assets/img/download-button.svg"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(11,0,null,null,0,"img",[["alt","close"],["class","top-icon cursor-hand"],["src","assets/img/cross-icon.svg"]],null,[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.onCloseClick()&&l);return l},null,null)),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n  "])),(n()(),l._38(-1,null,["\n  "])),(n()(),l._38(-1,null,["\n  "])),(n()(),l._17(16,0,null,null,21,"div",[["class","carousel-body d-flex h-100 justify-content-between"]],null,[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.onCloseClick()&&l);return l},null,null)),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n\n    "])),(n()(),l._11(16777216,null,null,1,null,Zn)),l._15(36,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n  "])),(n()(),l._38(-1,null,["\n"])),(n()(),l._38(-1,null,["\n"]))],function(n,e){n(e,36,0,"video"==e.component.messageData.document_type)},function(n,e){n(e,6,0,e.component.messageData.url)})}l._12("app-media-player",Dn,function(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"app-media-player",[],null,[["window","keyup"]],function(n,e,t){var s=!0;return"window:keyup"===e&&(s=!1!==l._30(n,1).keyEvent(t)&&s),s},$n,Wn)),l._15(1,245760,null,0,Dn,[o.a],null,null)],function(n,e){n(e,1,0)},null)},{messageData:"messageData"},{closePlayer:"closePlayer"},[]);var Ln=[[".back-icon[_ngcontent-%COMP%]{width:18px;height:18px;margin-right:10px;-ms-flex-item-align:center;align-self:center;display:-webkit-box;display:-ms-flexbox;display:flex;margin-left:10px}#fugu-messenger-header-div[_ngcontent-%COMP%]{height:50px;background-color:var(--color);-webkit-box-shadow:0 1px 4px rgba(0,0,0,.4);box-shadow:0 1px 4px rgba(0,0,0,.4);z-index:9;display:-webkit-box;display:-ms-flexbox;display:flex;padding:30px 30px 30px 15px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:Proxima-Regular;color:#fff;position:relative;border-top-left-radius:inherit!important;border-top-right-radius:inherit!important}#fugu-messenger-header-div.spacing-left[_ngcontent-%COMP%]{padding-left:30px}.messages-container[_ngcontent-%COMP%]{background-image:var(--background-url);border:1px solid #ddd;border-top-left-radius:0;border-top-right-radius:0;overflow:hidden}.message-container[_ngcontent-%COMP%]{min-width:45px;padding-bottom:2px;margin:0;width:100%}.message-container[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{min-width:45px;width:auto;padding:10px;border-radius:4px;max-width:80%;word-wrap:break-word;text-align:left}.message-container[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.message-container[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:15px 0 0;font-size:13px;line-height:1.62;color:#51445c;padding:0;text-transform:capitalize}.message-container.user-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#78717e;color:#fff;float:right;border-top-left-radius:10px;border-bottom-left-radius:10px}.message-container.agent-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#f8f9ff;color:#2c2333;display:inline-block;border-top-right-radius:10px;border-bottom-right-radius:10px;border:.5px solid #dce0e6}.typer-name[_ngcontent-%COMP%], .typing-container[_ngcontent-%COMP%]{text-align:var(--align-typing)!important}.message-container.agent-message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{float:left;text-align:left;padding:0}.message-container.user-message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{float:right;text-align:right;padding:0}.user-message[_ngcontent-%COMP%]   .conv-start[_ngcontent-%COMP%]{border-top-right-radius:20px}.user-message[_ngcontent-%COMP%]   .conv-end[_ngcontent-%COMP%]{border-bottom-right-radius:20px}.bot-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#fff!important;min-width:285px;border:1px solid #dadfe3}.agent-message[_ngcontent-%COMP%]   .conv-start[_ngcontent-%COMP%]{border-top-left-radius:20px}.agent-message[_ngcontent-%COMP%]   .conv-end[_ngcontent-%COMP%]{border-bottom-left-radius:20px}.private-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#ffffd9!important;color:#000!important}.feedback-content[_ngcontent-%COMP%]{position:relative;padding:0!important;border-top-right-radius:4px!important;border-bottom-right-radius:4px!important}.col-xs-12[_ngcontent-%COMP%]{width:100%;display:block}.message-row[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}.message-row[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:inherit}#messageScrollDiv[_ngcontent-%COMP%]{height:calc(100% - 55px);padding:0 30px 10px;overflow:auto;overflow-x:hidden;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}#actionsContainer[_ngcontent-%COMP%]{min-height:53px;position:absolute;bottom:0;background-color:#f4f7f9;width:100%;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom-left-radius:6px;border-bottom-right-radius:6px;padding:18px 0;box-shadow:0 -1px 10px rgba(0,0,0,.2);-webkit-box-shadow:0 -1px 10px rgba(0,0,0,.2)}#actionsContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;background-color:transparent;border:0;outline:0;resize:none;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 100px 0 30px;height:18px;font-size:15px;font-weight:400;line-height:1.33;white-space:pre;white-space:pre-wrap;word-wrap:break-word;-webkit-transition:background-color .2s ease,-webkit-box-shadow .2s ease;transition:background-color .2s ease,box-shadow .2s ease,-webkit-box-shadow .2s ease}#textarea-send-message[_ngcontent-%COMP%]{font-family:inherit}.action-buttons[_ngcontent-%COMP%]{position:absolute;right:16px;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;bottom:0}#btn-attachment[_ngcontent-%COMP%], #btn-send[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:0;background-color:transparent;outline:0;cursor:pointer;opacity:.5;padding-left:4px}#btn-attachment[_ngcontent-%COMP%]:hover, #btn-send[_ngcontent-%COMP%]:hover, .active-component-send#btn-send[_ngcontent-%COMP%]{opacity:1}#btn-attachment[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], #btn-send[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}#btn-attachment[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none;pointer-events:none}@-webkit-keyframes action-container-slide-in{0%{opacity:0;-webkit-transform:translateY(15px);transform:translateY(15px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes action-container-slide-in{0%{opacity:0;-webkit-transform:translateY(15px);transform:translateY(15px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}.back-icon-span[_ngcontent-%COMP%]{height:40px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-radius:4px;margin-right:2%}.back-icon-span[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.2)}.read-unread-div[_ngcontent-%COMP%]{padding:4px 0 0;display:-webkit-box;display:-ms-flexbox;display:flex}.chat-date-time[_ngcontent-%COMP%]{line-height:1;letter-spacing:-.3px;font-family:ProximaNova-reg;font-size:13px;text-align:left;color:#51445c;font-style:italic;margin:0}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;display:inline-block;-webkit-animation:1.4s infinite both ellipsis;animation:1.4s infinite both ellipsis;font-size:20px;color:#716c6c;height:15px;margin-right:3px}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:.2s;animation-delay:.2s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:.4s;animation-delay:.4s}.agent-message.loading[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#e4e1e1;border-radius:20px;padding:8px 10px}@keyframes ellipsis{0%,100%{opacity:.2}20%{opacity:1}}@-webkit-keyframes ellipsis{0%,100%{opacity:.2}20%{opacity:1}}.visibility-0[_ngcontent-%COMP%]{pointer-events:none;opacity:0;visibility:hidden;margin-left:-15px;display:none}p[_ngcontent-%COMP%]{margin:0!important}.buttons-container[_ngcontent-%COMP%]{position:absolute;bottom:54px;left:0;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-bottom:10px}.message-btn[_ngcontent-%COMP%]{font-size:12px}.message-btn[_ngcontent-%COMP%]:not(:first-child){margin-left:15px}.message-btn[_ngcontent-%COMP%]:hover{background-color:#fff}.pad-bot[_ngcontent-%COMP%]{padding-bottom:50px!important}textarea[_ngcontent-%COMP%]{font-size:16px!important}.explore-dashboard[_ngcontent-%COMP%]{position:absolute;right:60px}.explore-dashboard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;-webkit-transform:translateY(2px);transform:translateY(2px)}.position-relative[_ngcontent-%COMP%]{position:relative}.integration-logo[_ngcontent-%COMP%]{height:16px;width:16px;position:absolute;margin-left:3px}.message-container.agent-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .integration-logo[_ngcontent-%COMP%]{right:-20px;bottom:2px}.message-container.user-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .integration-logo[_ngcontent-%COMP%]{left:-24px;bottom:2px}  .agent-message .attachment-link{color:#08c!important}  .user-message .attachment-link{color:#fff!important}.file-uploading-text[_ngcontent-%COMP%]{font-size:12px}min-width-60[_ngcontent-%COMP%]{min-width:60%!important}#btn-plus[_ngcontent-%COMP%]{-webkit-box-shadow:none;box-shadow:none;border:none;background:0 0}.plus_dropup[_ngcontent-%COMP%]{position:relative}.dropup_content[_ngcontent-%COMP%]{position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;background-color:#fff;min-width:130px;-webkit-box-shadow:0 8px 16px 0 rgba(0,0,0,.2);box-shadow:0 8px 16px 0 rgba(0,0,0,.2);bottom:50px;right:8px;z-index:5}.dropup_content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:0 0}.dropup_content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f4f5f5}.dropup_content[_ngcontent-%COMP%]:after{content:'';position:absolute;bottom:-10px;width:0;right:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #9a9a9a;opacity:.3}.d-flex-normal[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.no-btn-style[_ngcontent-%COMP%]{background-color:#fff;border:none;-webkit-box-shadow:none;box-shadow:none;outline:0}.text-align-left[_ngcontent-%COMP%]{text-align:left}.text-align-right[_ngcontent-%COMP%]{text-align:right}.typing-message[_ngcontent-%COMP%]{font-size:12px}.floating-btn[_ngcontent-%COMP%]{position:absolute;right:25px;bottom:70px;width:42px;height:42px;border-radius:50%;z-index:1020;background-color:#fff;cursor:pointer;-webkit-box-shadow:0 1px 1px 0 rgba(0,0,0,.06),0 2px 5px 0 rgba(0,0,0,.2);box-shadow:0 1px 1px 0 rgba(0,0,0,.06),0 2px 5px 0 rgba(0,0,0,.2)}.badge-unread[_ngcontent-%COMP%]{right:-5px;position:absolute;top:-5px}.badge-floating-btn[_ngcontent-%COMP%]{background-color:#e02a46;border-radius:12px;padding:0 5px;text-align:center;color:#fff;display:inline-block;font-size:12px;line-height:20px;min-width:20px;min-height:20px;vertical-align:top}.no-reply[_ngcontent-%COMP%]{text-align:center;font-size:13px;color:rgba(0,0,0,.4)}"]],Rn=l._14({encapsulation:0,styles:Ln,data:{animation:[{type:7,name:"fadeSlideIn",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translateY(15px)",opacity:0},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateY(15px)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateY(0)",offset:1},offset:null}]},timings:".32s .16ms cubic-bezier(0.23, 1, 0.32, 1)"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{transform:"translateY(0px)",opacity:1},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,transform:"translateY(0)",offset:0},offset:null},{type:6,styles:{opacity:0,transform:"translateY(15px)",offset:1},offset:null}]},timings:".32s cubic-bezier(0.23, 1, 0.32, 1)"}],options:null}],options:{}},{type:7,name:"typingSlideIn",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{height:0,opacity:0},offset:null},{type:4,styles:{type:6,styles:{height:"20px",opacity:1},offset:null},timings:"100ms ease-in"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{height:"20px",opacity:0},offset:null},{type:4,styles:{type:6,styles:{height:0},offset:null},timings:"100ms ease-out"}],options:null}],options:{}},{type:7,name:"scaleInOut",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"scale(0)",opacity:0},offset:null},{type:4,styles:{type:6,styles:{transform:"scale(1)",opacity:1},offset:null},timings:"0.3s 0.16s cubic-bezier(0.23, 1, 0.32, 1)"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{transform:"scale(1)",opacity:1},offset:null},{type:4,styles:{type:6,styles:{transform:"scale(0)",opacity:0},offset:null},timings:"0.2s 0.16s ease-out"}],options:null}],options:{}},{type:7,name:"fadeSlideInMessages",definitions:[{type:1,expr:"* => new",animation:[{type:11,selector:".agent-message",animation:[{type:6,styles:{opacity:0,transform:"translateX(-15px)"},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(-15px)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:".42s .16ms cubic-bezier(0.23, 1, 0.32, 1)"}],options:{optional:!0}},{type:11,selector:".user-message",animation:[{type:6,styles:{opacity:0,transform:"translateX(15px)"},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(15px)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:".42s .16ms cubic-bezier(0.23, 1, 0.32, 1)"}],options:{optional:!0}}],options:null},{type:1,expr:"* => added",animation:[{type:11,selector:".agent-message",animation:[{type:6,styles:{opacity:0,transform:"translateY(15px)"},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateY(15px)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateY(0)",offset:1},offset:null}]},timings:".32s .16ms ease"}],options:{optional:!0}},{type:11,selector:".user-message",animation:[{type:6,styles:{opacity:0,transform:"translateY(15px)"},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateY(15px)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateY(0)",offset:1},offset:null}]},timings:".32s .16ms ease"}],options:{optional:!0}}],options:null}],options:{}}]}});function Nn(n){return l._40(0,[(n()(),l._17(0,0,null,null,5,"span",[["class","back-icon-span"]],null,[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.backToConversations()&&l);return l},null,null)),l._15(1,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l._33(2,{"visibility-0":0}),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(4,0,null,null,0,"img",[["class","back-icon"],["src","assets/img/backArrow.svg"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "]))],function(n,e){var t=e.component;n(e,1,0,"back-icon-span",n(e,2,0,t.hideBackBtn&&0==t.messages.length))},null)}function jn(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"span",[["class","typing-message mt-1"]],[[24,"@typingSlideIn",0]],null,null,null,null)),(n()(),l._38(1,null,["\n          ","typing...\n        "]))],null,function(n,e){var t=e.component;n(e,0,0,void 0),n(e,1,0,t.isAgentTypingName.split(" ")[0]+" is ")})}function Bn(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"span",[["class","typing-message mt-1"]],[[24,"@typingSlideIn",0]],null,null,null,null)),(n()(),l._38(1,null,["\n          ","typing...\n        "]))],null,function(n,e){var t=e.component;n(e,0,0,void 0),n(e,1,0,t.isAgentTypingName.split(" ")[0]+" is ")})}function Un(n){return l._40(0,[(n()(),l._17(0,0,null,null,3,"div",[["id","loader-div"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(2,0,null,null,0,"img",[["id","loader-img"],["src","assets/img/ring.gif"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n    "]))],null,null)}function Yn(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),l._38(-1,null,["You"]))],null,null)}function Hn(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),l._38(1,null,["",""]))],null,function(n,e){n(e,1,0,e.parent.parent.parent.context.$implicit.full_name)})}function qn(n){return l._40(0,[(n()(),l._17(0,0,null,null,8,"h5",[["class","col-xs-12"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n            "])),(n()(),l._11(16777216,null,null,1,null,Yn)),l._15(3,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n            "])),(n()(),l._38(-1,null,["\n            "])),(n()(),l._11(16777216,null,null,1,null,Hn)),l._15(7,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n          "]))],function(n,e){var t=e.component;n(e,3,0,e.parent.parent.context.$implicit.user_id==t.commonService.userDetails.user_id),n(e,7,0,e.parent.parent.context.$implicit.user_id!=t.commonService.userDetails.user_id)},null)}function Gn(n){return l._40(0,[(n()(),l._17(0,0,null,null,0,"img",[["class","integration-logo"]],[[8,"src",4]],null,null,null,null))],null,function(n,e){var t=e.component;n(e,0,0,e.parent.parent.context.$implicit.integration_source==t.IntegrationTypeEnum.MESSENGER?"assets/img/messenger-source-icon.svg":"assets/img/email-icon.svg")})}function Vn(n){return l._40(0,[(n()(),l._17(0,0,null,null,5,"p",[["class","chat-date-time text-right"],["style","float:right"]],null,null,null,null,null)),(n()(),l._38(-1,null,["Sent\n                  "])),(n()(),l._17(2,0,null,null,2,"span",[["style","text-transform:lowercase"]],null,null,null,null,null)),(n()(),l._38(3,null,[" ",""])),l._34(4,2),(n()(),l._38(-1,null,["\n                "]))],null,function(n,e){n(e,3,0,l._39(e,3,0,n(e,4,0,l._30(e.parent.parent.parent.parent.parent.parent,0),e.parent.parent.parent.parent.parent.context.$implicit.date_time,"jm")))})}function Jn(n){return l._40(0,[(n()(),l._17(0,0,null,null,5,"p",[["class","chat-date-time text-right"],["style","float:right"]],null,null,null,null,null)),(n()(),l._38(-1,null,["Read\n                  "])),(n()(),l._17(2,0,null,null,2,"span",[["class","chat-date-time"],["style","text-transform:lowercase"]],null,null,null,null,null)),(n()(),l._38(3,null,["",""])),l._34(4,2),(n()(),l._38(-1,null,["\n                "]))],null,function(n,e){n(e,3,0,l._39(e,3,0,n(e,4,0,l._30(e.parent.parent.parent.parent.parent.parent,0),e.parent.parent.parent.parent.parent.context.$implicit.date_time,"jm")))})}function Xn(n){return l._40(0,[(n()(),l._17(0,0,null,null,5,"p",[["class","chat-date-time text-right"],["style","float:right"]],null,null,null,null,null)),(n()(),l._38(-1,null,["Delivered\n                  "])),(n()(),l._17(2,0,null,null,2,"span",[["class","chat-date-time"],["style","float:right;text-transform:lowercase"]],null,null,null,null,null)),(n()(),l._38(3,null,["",""])),l._34(4,2),(n()(),l._38(-1,null,["\n                "]))],null,function(n,e){n(e,3,0,l._39(e,3,0,n(e,4,0,l._30(e.parent.parent.parent.parent.parent.parent,0),e.parent.parent.parent.parent.parent.context.$implicit.date_time,"jm")))})}function Kn(n){return l._40(0,[(n()(),l._17(0,0,null,null,5,"p",[["class","chat-date-time text-left"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n                  "])),(n()(),l._17(2,0,null,null,2,"span",[["class","chat-date-time;text-transform:lowercase"]],null,null,null,null,null)),(n()(),l._38(3,null,["",""])),l._34(4,2),(n()(),l._38(-1,null,["\n                "]))],null,function(n,e){n(e,3,0,l._39(e,3,0,n(e,4,0,l._30(e.parent.parent.parent.parent.parent.parent,0),e.parent.parent.parent.parent.parent.context.$implicit.date_time,"jm")))})}function Qn(n){return l._40(0,[(n()(),l._17(0,0,null,null,13,null,null,null,null,null,null,null)),(n()(),l._38(-1,null,["\n                "])),(n()(),l._11(16777216,null,null,1,null,Vn)),l._15(3,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n                "])),(n()(),l._11(16777216,null,null,1,null,Jn)),l._15(6,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n                "])),(n()(),l._11(16777216,null,null,1,null,Xn)),l._15(9,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n                "])),(n()(),l._11(16777216,null,null,1,null,Kn)),l._15(12,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n              "]))],function(n,e){var t=e.component;n(e,3,0,e.parent.parent.parent.parent.context.$implicit.message_status==t.MessageStatusEnum.Sent&&e.parent.parent.parent.parent.context.$implicit.user_type==t.UserTypeEnum.Customer),n(e,6,0,e.parent.parent.parent.parent.context.$implicit.message_status==t.MessageStatusEnum.Read&&e.parent.parent.parent.parent.context.$implicit.user_type==t.UserTypeEnum.Customer),n(e,9,0,e.parent.parent.parent.parent.context.$implicit.message_status==t.MessageStatusEnum.Delivered&&e.parent.parent.parent.parent.context.$implicit.user_type==t.UserTypeEnum.Customer),n(e,12,0,e.parent.parent.parent.parent.context.$implicit.user_type==t.UserTypeEnum.Agent)},null)}function ne(n){return l._40(0,[(n()(),l._17(0,0,null,null,5,"p",[["class","chat-date-time text-right"],["style","float:right"]],null,null,null,null,null)),(n()(),l._38(-1,null,["Sent:\n                  "])),(n()(),l._17(2,0,null,null,2,"span",[["style","float:right;text-transform:lowercase"]],null,null,null,null,null)),(n()(),l._38(3,null,[" ",""])),l._34(4,2),(n()(),l._38(-1,null,["\n                "]))],null,function(n,e){n(e,3,0,l._39(e,3,0,n(e,4,0,l._30(e.parent.parent.parent.parent.parent.parent,0),e.parent.parent.parent.parent.parent.context.$implicit.date_time,"jm")))})}function ee(n){return l._40(0,[(n()(),l._17(0,0,null,null,5,"p",[["class","chat-date-time text-right"],["style","float:right"]],null,null,null,null,null)),(n()(),l._38(-1,null,["Read:\n                  "])),(n()(),l._17(2,0,null,null,2,"span",[["class","chat-date-time"],["style","float:right;text-transform:lowercase"]],null,null,null,null,null)),(n()(),l._38(3,null,["",""])),l._34(4,2),(n()(),l._38(-1,null,["\n                "]))],null,function(n,e){n(e,3,0,l._39(e,3,0,n(e,4,0,l._30(e.parent.parent.parent.parent.parent.parent,0),e.parent.parent.parent.parent.parent.context.$implicit.date_time,"jm")))})}function te(n){return l._40(0,[(n()(),l._17(0,0,null,null,7,null,null,null,null,null,null,null)),(n()(),l._38(-1,null,["\n                "])),(n()(),l._11(16777216,null,null,1,null,ne)),l._15(3,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n                "])),(n()(),l._11(16777216,null,null,1,null,ee)),l._15(6,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n              "]))],function(n,e){var t=e.component;n(e,3,0,e.parent.parent.parent.parent.context.$implicit.message_status==t.MessageStatusEnum.Sent),n(e,6,0,e.parent.parent.parent.parent.context.$implicit.message_status==t.MessageStatusEnum.Read)},null)}function le(n){return l._40(0,[(n()(),l._17(0,0,null,null,7,"div",[["style","width:100%"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n              "])),(n()(),l._11(16777216,null,null,1,null,Qn)),l._15(3,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n              "])),(n()(),l._11(16777216,null,null,1,null,te)),l._15(6,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n            "]))],function(n,e){var t=e.component;n(e,3,0,t.chatType!=t.ChatTypeEnum.AdminToAdmin),n(e,6,0,t.chatType==t.ChatTypeEnum.AdminToAdmin&&e.parent.parent.parent.context.$implicit.user_id==t.commonService.userDetails.user_id)},null)}function se(n){return l._40(0,[(n()(),l._17(0,0,null,null,7,"div",[],null,null,null,null,null)),(n()(),l._38(-1,null,["\n              "])),(n()(),l._17(2,0,null,null,4,"p",[["class","chat-date-time text-right"],["style","float:right"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n                "])),(n()(),l._17(4,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),l._38(-1,null,["Sending..."])),(n()(),l._38(-1,null,["\n              "])),(n()(),l._38(-1,null,["\n            "]))],null,null)}function ie(n){return l._40(0,[(n()(),l._17(0,0,null,null,8,"div",[["class","col-xs-12 text-left read-unread-div"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n            "])),(n()(),l._38(-1,null,["\n            "])),(n()(),l._11(16777216,null,null,1,null,le)),l._15(4,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n            "])),(n()(),l._11(16777216,null,null,1,null,se)),l._15(7,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n          "]))],function(n,e){var t=e.component;n(e,4,0,e.parent.parent.context.index==t.messages.length-1||e.parent.parent.context.index!=t.messages.length-1),n(e,7,0,e.parent.parent.context.index==t.messages.length-1&&e.parent.parent.context.$implicit.message_status==t.MessageStatusEnum.Sending)},null)}function oe(n){return l._40(0,[(n()(),l._17(0,0,null,null,22,"div",[["class","message-container"]],null,null,null,null,null)),l._15(1,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l._33(2,{"agent-message":0,"user-message":1,"private-message":2,"bot-message":3}),(n()(),l._38(-1,null,["\n          "])),(n()(),l._11(16777216,null,null,1,null,qn)),l._15(5,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n          "])),(n()(),l._17(7,0,null,null,11,"div",[["class","message-content position-relative"]],null,null,null,null,null)),l._15(8,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l._33(9,{"min-width-60":0,"conv-end":1,"conv-start":2,"red-border":3,"feedback-content":4}),(n()(),l._38(-1,null,["\n            "])),(n()(),l._17(11,0,null,null,2,"app-message-content",[],null,[[null,"openMediaPlayer"]],function(n,e,t){var l=!0,s=n.component;"openMediaPlayer"===e&&(l=!1!==(s.mediaPlayerObject=t)&&l);return l},Tn,J)),l._15(12,114688,null,0,G,[o.a,s.a,u.a,R.f],{messageItem:[0,"messageItem"]},{openMediaPlayer:"openMediaPlayer"}),(n()(),l._38(-1,null,["\n            "])),(n()(),l._38(-1,null,["\n            "])),(n()(),l._11(16777216,null,null,2,null,Gn)),l._15(16,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),l._31(17,2),(n()(),l._38(-1,null,["\n          "])),(n()(),l._38(-1,null,["\n          "])),(n()(),l._11(16777216,null,null,1,null,ie)),l._15(21,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n        "]))],function(n,e){var t=e.component;n(e,1,0,"message-container",n(e,2,0,e.parent.context.$implicit.user_type==t.UserTypeEnum.Agent||t.chatType==t.ChatTypeEnum.AdminToAdmin&&e.parent.context.$implicit.user_id!=t.commonService.userDetails.user_id,t.chatType!=t.ChatTypeEnum.AdminToAdmin&&e.parent.context.$implicit.user_type==t.UserTypeEnum.Customer||t.chatType==t.ChatTypeEnum.AdminToAdmin&&e.parent.context.$implicit.user_id==t.commonService.userDetails.user_id||e.parent.context.$implicit.user_type==t.UserTypeEnum.Bot||e.parent.context.$implicit.message_type==t.MessageTypeEnum.Custom_Action_Message||e.parent.context.$implicit.message_type==t.MessageTypeEnum.Bot_Text_Message,e.parent.context.$implicit.message_type==t.MessageTypeEnum.Private_Message,e.parent.context.$implicit.message_type==t.MessageTypeEnum.Feedback_Message||e.parent.context.$implicit.message_type==t.MessageTypeEnum.Form_Message)),n(e,5,0,0==e.parent.context.index||t.messages[e.parent.context.index-1].user_id!=e.parent.context.$implicit.user_id);n(e,8,0,"message-content position-relative",n(e,9,0,e.parent.context.$implicit.message_type==t.MessageTypeEnum.Payment_Message,0!=e.parent.context.index&&t.messages[e.parent.context.index-1].user_id==e.parent.context.$implicit.user_id&&(e.parent.context.index==t.messages.length-1||t.messages[e.parent.context.index+1].user_id!=e.parent.context.$implicit.user_id||t.messages[e.parent.context.index+1].message_type!=e.parent.context.$implicit.message_type)&&t.messages[e.parent.context.index-1].message_type==e.parent.context.$implicit.message_type,(0==e.parent.context.index||t.messages[e.parent.context.index-1].user_id!=e.parent.context.$implicit.user_id||t.messages[e.parent.context.index-1].message_type!=e.parent.context.$implicit.message_type)&&e.parent.context.index!=t.messages.length-1&&t.messages[e.parent.context.index+1].user_id==e.parent.context.$implicit.user_id&&t.messages[e.parent.context.index+1].message_type==e.parent.context.$implicit.message_type,e.parent.context.$implicit.message_status==t.MessageStatusEnum.Sending,e.parent.context.$implicit.message_type==t.MessageTypeEnum.Feedback_Message)),n(e,12,0,e.parent.context.$implicit),n(e,16,0,n(e,17,0,t.IntegrationTypeEnum.MESSENGER,t.IntegrationTypeEnum.EMAIL).includes(e.parent.context.$implicit.integration_source)),n(e,21,0,e.parent.context.index==t.last_customer_time_index&&e.parent.context.$implicit.user_type==t.UserTypeEnum.Customer||e.parent.context.index==t.last_agent_time_index&&e.parent.context.$implicit.user_type==t.UserTypeEnum.Agent)},null)}function ae(n){return l._40(0,[(n()(),l._17(0,0,null,null,5,"div",[["class","proxima-regular message-row"]],[[24,"@fadeSlideInMessages",0]],null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._38(-1,null,["\n\n        "])),(n()(),l._11(16777216,null,null,1,null,oe)),l._15(4,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n      "]))],function(n,e){var t=e.component;n(e,4,0,e.context.$implicit.message_type==t.MessageTypeEnum.Customer_Agent_Message||e.context.$implicit.message_type==t.MessageTypeEnum.Image_Message||e.context.$implicit.message_type==t.MessageTypeEnum.File_Message||e.context.$implicit.message_type==t.MessageTypeEnum.Form_Message||e.context.$implicit.message_type==t.MessageTypeEnum.Bot_Text_Message||e.context.$implicit.message_type==t.MessageTypeEnum.Payment_Message||e.context.$implicit.message_type==t.MessageTypeEnum.Feedback_Message||e.context.$implicit.message_type==t.MessageTypeEnum.Custom_Action_Message)},function(n,e){n(e,0,0,e.context.$implicit.state?e.context.$implicit.state:"new")})}function ue(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"p",[["class","mb-0 text-right proxima-regular pr-4 pb-2 file-uploading-text"]],null,null,null,null,null)),(n()(),l._38(-1,null,["Uploading\n        file..."]))],null,null)}function re(n){return l._40(0,[(n()(),l._17(0,0,null,null,4,"span",[["class","badge-unread"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(2,0,null,null,1,"span",[["class","badge-floating-btn"]],null,null,null,null,null)),(n()(),l._38(3,null,["",""])),(n()(),l._38(-1,null,["\n      "]))],null,function(n,e){var t=e.component;n(e,3,0,t.messages.length-t.showFloatingBtnLength)})}function ce(n){return l._40(0,[(n()(),l._17(0,0,null,null,9,"span",[["class","floating-btn d-flex justify-content-center align-items-center"]],[[24,"@scaleInOut",0]],[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.scrollToBottom()&&l);return l},null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._11(16777216,null,null,1,null,re)),l._15(3,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(5,0,null,null,3,":svg:svg",[["height","21"],["viewBox","0 0 21 21"],["width","21"],["xmlns","http://www.w3.org/2000/svg"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(7,0,null,null,0,":svg:path",[["d","M4.8 6.1l5.7 5.7 5.7-5.7 1.6 1.6-7.3 7.2-7.3-7.2 1.6-1.6z"],["fill","#263238"],["fill-opacity",".33"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._38(-1,null,["\n    "]))],function(n,e){var t=e.component;n(e,3,0,t.messages.length-t.showFloatingBtnLength&&t.showFloatingBtnLength)},function(n,e){n(e,0,0,void 0)})}function pe(n){return l._40(0,[(n()(),l._17(0,0,null,null,7,"textarea",[["autofocus",""],["id","textarea-send-message"],["placeholder","Type your message..."],["style","min-height:auto;"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"ngModelChange"],[null,"keydown"],[null,"focus"],[null,"blur"],[null,"input"],[null,"compositionstart"],[null,"compositionend"]],function(n,e,t){var s=!0,i=n.component;"input"===e&&(s=!1!==l._30(n,2)._handleInput(t.target.value)&&s);"blur"===e&&(s=!1!==l._30(n,2).onTouched()&&s);"compositionstart"===e&&(s=!1!==l._30(n,2)._compositionStart()&&s);"compositionend"===e&&(s=!1!==l._30(n,2)._compositionEnd(t.target.value)&&s);"keyup"===e&&(s=!1!==i.autoGrow(t)&&s);"ngModelChange"===e&&(s=!1!==(i.messageToSend=t)&&s);"keydown"===e&&(s=!1!==i.onTextarea_keydown(t)&&s);"focus"===e&&(s=!1!==i.onTextAreaFocus(t)&&s);"blur"===e&&(s=!1!==i.onTextAreaBlur(t)&&s);return s},null,null)),l._15(1,4276224,null,0,N,[l.n,l.M],null,null),l._15(2,16384,null,0,R.c,[l.N,l.n,[2,R.a]],null,null),l._35(1024,null,R.m,function(n){return[n]},[R.c]),l._15(4,671744,null,0,R.r,[[8,null],[8,null],[8,null],[2,R.m]],{model:[0,"model"]},{update:"ngModelChange"}),l._35(2048,null,R.n,null,[R.r]),l._15(6,16384,null,0,R.o,[R.n],null,null),l._15(7,4276224,null,0,j,[l.n,l.M],{autofocus:[0,"autofocus"]},null)],function(n,e){var t=e.component;n(e,1,0),n(e,4,0,t.messageToSend);n(e,7,0,!0)},function(n,e){n(e,0,0,l._30(e,6).ngClassUntouched,l._30(e,6).ngClassTouched,l._30(e,6).ngClassPristine,l._30(e,6).ngClassDirty,l._30(e,6).ngClassValid,l._30(e,6).ngClassInvalid,l._30(e,6).ngClassPending)})}function ge(n){return l._40(0,[(n()(),l._17(0,0,null,null,5,"textarea",[["class","txtarea-mobile"],["id","textarea-send-message"],["placeholder","Type your message..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"ngModelChange"],[null,"keydown"],[null,"focus"],[null,"blur"],[null,"input"],[null,"compositionstart"],[null,"compositionend"]],function(n,e,t){var s=!0,i=n.component;"input"===e&&(s=!1!==l._30(n,1)._handleInput(t.target.value)&&s);"blur"===e&&(s=!1!==l._30(n,1).onTouched()&&s);"compositionstart"===e&&(s=!1!==l._30(n,1)._compositionStart()&&s);"compositionend"===e&&(s=!1!==l._30(n,1)._compositionEnd(t.target.value)&&s);"keyup"===e&&(s=!1!==i.autoGrow(t)&&s);"ngModelChange"===e&&(s=!1!==(i.messageToSend=t)&&s);"keydown"===e&&(s=!1!==i.onTextarea_keydown(t)&&s);"focus"===e&&(s=!1!==i.onTextAreaFocus(t)&&s);"blur"===e&&(s=!1!==i.onTextAreaBlur(t)&&s);return s},null,null)),l._15(1,16384,null,0,R.c,[l.N,l.n,[2,R.a]],null,null),l._35(1024,null,R.m,function(n){return[n]},[R.c]),l._15(3,671744,null,0,R.r,[[8,null],[8,null],[8,null],[2,R.m]],{model:[0,"model"]},{update:"ngModelChange"}),l._35(2048,null,R.n,null,[R.r]),l._15(5,16384,null,0,R.o,[R.n],null,null)],function(n,e){n(e,3,0,e.component.messageToSend)},function(n,e){n(e,0,0,l._30(e,5).ngClassUntouched,l._30(e,5).ngClassTouched,l._30(e,5).ngClassPristine,l._30(e,5).ngClassDirty,l._30(e,5).ngClassValid,l._30(e,5).ngClassInvalid,l._30(e,5).ngClassPending)})}function me(n){return l._40(0,[(n()(),l._17(0,0,null,null,6,"button",[["id","btn-attachment"]],null,[[null,"click"],[null,"touch"]],function(n,e,t){var s=!0,i=n.component;"click"===e&&(s=!1!==i.onAttchmentClick(l._30(n,5))&&s);"touch"===e&&(s=!1!==i.onAttchmentClick(l._30(n,5))&&s);return s},null,null)),(n()(),l._38(-1,null,["\n            "])),(n()(),l._17(2,0,null,null,0,"img",[["src","assets/img/attach.svg"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n            "])),(n()(),l._38(-1,null,["\n            "])),(n()(),l._17(5,0,[[2,0],["fileInput",1]],null,0,"input",[["accept","*"],["multiple",""],["type","file"]],null,[[null,"change"]],function(n,e,t){var l=!0,s=n.component;"change"===e&&(l=!1!==s.prepareFilesForUpload(t)&&l);return l},null,null)),(n()(),l._38(-1,null,["\n          "]))],null,null)}function de(n){return l._40(0,[(n()(),l._17(0,0,null,null,20,"div",[["class","plus_dropup d-flex align-items-center"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n            "])),(n()(),l._17(2,0,null,null,3,"button",[["class","cursor-hand outline-none box-shadow-none"],["id","btn-plus"]],null,[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!=(s.dropup_open=!s.dropup_open)&&l);return l},null,null)),(n()(),l._38(-1,null,["\n              "])),(n()(),l._17(4,0,null,null,0,"img",[["src","assets/img/plus-icon.svg"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n            "])),(n()(),l._38(-1,null,["\n            "])),(n()(),l._17(7,0,null,null,12,"div",[["class","dropup_content d-flex-normal flex-column"]],null,null,null,null,null)),l._15(8,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l._33(9,{"d-none":0}),(n()(),l._38(-1,null,["\n              "])),(n()(),l._17(11,0,null,null,4,"button",[["class","pl-3 p-2\n                           cursor-hand no-btn-style text-left outline-none d-flex align-items-center"]],null,[[null,"click"],[null,"touch"]],function(n,e,t){var s=!0,i=n.component;"click"===e&&(s=!1!==i.onAttchmentClick(l._30(n,14))&&s);"touch"===e&&(s=!1!==i.onAttchmentClick(l._30(n,14))&&s);return s},null,null)),(n()(),l._38(-1,null,["\n                Attachment\n                "])),(n()(),l._38(-1,null,["\n                "])),(n()(),l._17(14,0,[[2,0],["fileInput",1]],null,0,"input",[["accept","*"],["style","display: none"],["type","file"]],null,[[null,"change"]],function(n,e,t){var l=!0,s=n.component;"change"===e&&(l=!1!==s.prepareFilesForUpload(t)&&l);return l},null,null)),(n()(),l._38(-1,null,["\n              "])),(n()(),l._38(-1,null,["\n              "])),(n()(),l._17(17,0,null,null,1,"button",[["class","pl-3 p-2\n                           cursor-hand no-btn-style text-left outline-none d-flex align-items-center"]],null,[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(s.openPaymentRequestForm(),l=!1!=(s.dropup_open=!1)&&l);return l},null,null)),(n()(),l._38(-1,null,["Request Payment"])),(n()(),l._38(-1,null,["\n            "])),(n()(),l._38(-1,null,["\n          "]))],function(n,e){n(e,8,0,"dropup_content d-flex-normal flex-column",n(e,9,0,!e.component.dropup_open))},null)}function _e(n){return l._40(0,[(n()(),l._17(0,0,null,null,23,null,null,null,null,null,null,null)),(n()(),l._38(-1,null,["\n\n        "])),(n()(),l._11(16777216,null,null,1,null,pe)),l._15(3,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n\n        "])),(n()(),l._11(16777216,null,null,1,null,ge)),l._15(6,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(8,0,null,null,14,"div",[["class","action-buttons"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n          "])),(n()(),l._17(10,0,null,null,5,"button",[["id","btn-send"]],null,[[null,"click"],[null,"touch"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.onSendClick()&&l);"touch"===e&&(l=!1!==s.onSendClick()&&l);return l},null,null)),l._15(11,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{ngClass:[0,"ngClass"]},null),l._33(12,{"active-component-send":0}),(n()(),l._38(-1,null,["\n            "])),(n()(),l._17(14,0,null,null,0,"img",[["src","assets/img/send.svg"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n          "])),(n()(),l._38(-1,null,["\n          "])),(n()(),l._11(16777216,null,null,1,null,me)),l._15(18,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n          "])),(n()(),l._11(16777216,null,null,1,null,de)),l._15(21,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n        "])),(n()(),l._38(-1,null,["\n      "]))],function(n,e){var t=e.component;n(e,3,0,!t.touchdevice),n(e,6,0,t.touchdevice),n(e,11,0,n(e,12,0,t.messageToSend.length>0)),n(e,18,0,!t.fuguWidgetService.fuguWidgetData.is_payment_enabled||t.activeChannelId<0),n(e,21,0,t.fuguWidgetService.fuguWidgetData.is_payment_enabled&&t.activeChannelId>0)},null)}function fe(n){return l._40(0,[(n()(),l._17(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(2,0,null,null,1,"span",[["class","text-center w-100 no-reply"]],null,null,null,null,null)),(n()(),l._38(-1,null,["You cannot reply to this conversation"])),(n()(),l._38(-1,null,["\n      "]))],null,null)}function he(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"button",[["class","btn message-btn"]],null,[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.selectFormType(n.context.$implicit.action_id,n.context.$implicit.button_title)&&l);return l},null,null)),(n()(),l._38(1,null,["",""]))],null,function(n,e){n(e,1,0,e.context.$implicit.button_title)})}function ye(n){return l._40(0,[(n()(),l._17(0,0,null,null,4,"div",[["class","buttons-container"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._11(16777216,null,null,1,null,he)),l._15(3,802816,null,0,b.j,[l.Z,l.W,l.y],{ngForOf:[0,"ngForOf"]},null),(n()(),l._38(-1,null,["\n      "]))],function(n,e){n(e,3,0,e.component.buttonFields.content_value)},null)}function be(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"app-media-player",[],null,[[null,"closePlayer"],["window","keyup"]],function(n,e,t){var s=!0,i=n.component;"window:keyup"===e&&(s=!1!==l._30(n,1).keyEvent(t)&&s);"closePlayer"===e&&(s=!1!=(i.mediaPlayerObject.is_open=!1)&&s);return s},$n,Wn)),l._15(1,245760,null,0,Dn,[o.a],{messageData:[0,"messageData"]},{closePlayer:"closePlayer"})],function(n,e){n(e,1,0,e.component.mediaPlayerObject.message_data)},null)}function ve(n){return l._40(0,[l._32(0,b.d,[l.A]),l._36(402653184,1,{scrollDiv:0}),l._36(671088640,2,{fileInput:0}),(n()(),l._17(3,0,null,null,67,"div",[["class","fuguCss fugu-messenger"],["id","fugu-messenger"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n  "])),(n()(),l._17(5,0,null,null,25,"div",[["class","proxima-regular"],["id","fugu-messenger-header-div"]],null,null,null,null,null)),l._15(6,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l._33(7,{"spacing-left":0}),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(9,0,null,null,17,"div",[["class","header-content"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n      "])),(n()(),l._11(16777216,null,null,1,null,Nn)),l._15(12,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n      "])),(n()(),l._38(-1,null,["\n      "])),(n()(),l._17(15,0,null,null,10,"div",[["class","label-header flex-grow d-flex flex-column justify-content-center"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n        "])),(n()(),l._17(17,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),l._38(18,null,["",""])),(n()(),l._38(-1,null,["\n        "])),(n()(),l._11(16777216,null,null,1,null,jn)),l._15(21,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n        "])),(n()(),l._11(16777216,null,null,1,null,Bn)),l._15(24,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n      "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(29,0,null,null,0,"div",[["class","cancel-btn-header2"]],null,[[null,"click"]],function(n,e,t){var l=!0,s=n.component;"click"===e&&(l=!1!==s.oncrossClick()&&l);return l},null,null)),(n()(),l._38(-1,null,["\n  "])),(n()(),l._38(-1,null,["\n  "])),(n()(),l._17(32,0,null,null,34,"div",[["class","fuguCss fugu-messenger-main-div messages-container"],["id","fugu-messenger-main-div"]],null,null,null,null,null)),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,1,null,Un)),l._15(35,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(37,0,[[1,0],["scroll",1]],null,10,"div",[["id","messageScrollDiv"]],null,[[null,"wheel"],[null,"touchmove"],[null,"scroll"]],function(n,e,t){var s=!0,i=n.component;"wheel"===e&&(s=!1!==i.disableScroll(t,l._30(n,37))&&s);"touchmove"===e&&(s=!1!==i.onTouchMove(t,l._30(n,37))&&s);"scroll"===e&&(s=!1!==i.onMessagesScroll()&&s);return s},null,null)),l._15(38,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{ngClass:[0,"ngClass"]},null),l._33(39,{"pad-bot":0}),(n()(),l._38(-1,null,["\n      "])),(n()(),l._11(16777216,null,null,1,null,ae)),l._15(42,802816,null,0,b.j,[l.Z,l.W,l.y],{ngForOf:[0,"ngForOf"]},null),(n()(),l._38(-1,null,["\n      "])),(n()(),l._38(-1,null,["\n      "])),(n()(),l._11(16777216,null,null,1,null,ue)),l._15(46,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n    "])),(n()(),l._11(16777216,null,null,1,null,ce)),l._15(51,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n    "])),(n()(),l._17(53,0,null,null,12,"div",[["class","proxima-regular"],["id","actionsContainer"]],[[24,"@fadeSlideIn",0]],null,null,null,null)),l._15(54,278528,null,0,b.i,[l.y,l.z,l.n,l.M],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l._33(55,{"white-bg":0}),(n()(),l._38(-1,null,["\n      "])),(n()(),l._11(16777216,null,null,1,null,_e)),l._15(58,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n      "])),(n()(),l._11(16777216,null,null,1,null,fe)),l._15(61,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n      "])),(n()(),l._11(16777216,null,null,1,null,ye)),l._15(64,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n    "])),(n()(),l._38(-1,null,["\n  "])),(n()(),l._38(-1,null,["\n  "])),(n()(),l._11(16777216,null,null,1,null,be)),l._15(69,16384,null,0,b.k,[l.Z,l.W],{ngIf:[0,"ngIf"]},null),(n()(),l._38(-1,null,["\n"]))],function(n,e){var t=e.component;n(e,6,0,"proxima-regular",n(e,7,0,t.hideBackBtn&&0==t.messages.length)),n(e,12,0,t.commonService.showBackButton),n(e,21,0,t.isAgentTyping),n(e,24,0,t.isUserTyping),n(e,35,0,t.showLoader),n(e,38,0,n(e,39,0,t.buttonFields.id)),n(e,42,0,t.messages),n(e,46,0,t.file_uploading_text),n(e,51,0,t.showFloatingBtn&&t.messages.length);n(e,54,0,"proxima-regular",n(e,55,0,t.commonService.iPadState)),n(e,58,0,!t.replyDisabled),n(e,61,0,t.replyDisabled),n(e,64,0,t.buttonFields),n(e,69,0,t.mediaPlayerObject.is_open)},function(n,e){var t=e.component;n(e,18,0,t.labelHeader),n(e,53,0,t.alive)})}var xe=l._12("app-chat",m,function(n){return l._40(0,[(n()(),l._17(0,0,null,null,1,"app-chat",[],null,[["document","touchstart"]],function(n,e,t){var s=!0;return"document:touchstart"===e&&(s=!1!==l._30(n,1).onTouchStart(t)&&s),s},ve,Rn)),l._15(1,245760,null,0,m,[r.k,r.a,o.a,u.a,s.a,l.G,g.a,l.i],null,null)],function(n,e){n(e,1,0)},null)},{},{},[]),Ce=t("NG/o"),ke=function(){return function(){}}();t.d(e,"LayoutModuleNgFactory",function(){return Me});var Me=l._13(d,[],function(n){return l._28([l._29(512,l.k,l._9,[[8,[y,L,xe]],[3,l.k],l.E]),l._29(4608,b.m,b.l,[l.A]),l._29(4608,R.z,R.z,[]),l._29(4608,R.f,R.f,[]),l._29(135680,g.a,g.a,[s.a,o.a,u.a]),l._29(512,b.b,b.b,[]),l._29(512,r.l,r.l,[[2,r.q],[2,r.k]]),l._29(512,Ce.a,Ce.a,[]),l._29(512,R.w,R.w,[]),l._29(512,R.l,R.l,[]),l._29(512,R.t,R.t,[]),l._29(512,ke,ke,[]),l._29(512,d,d,[]),l._29(1024,r.i,function(){return[[],[{path:"",component:a,children:[{path:"",redirectTo:"conversations",pathMatch:"full"},{path:"conversations",component:p},{path:"chat/:channelId",component:m}]}]]},[])])})}});