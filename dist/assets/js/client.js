var Faye=function(g){function d(c){if(a[c])return a[c].exports;var b=a[c]={exports:{},id:c,loaded:!1};return g[c].call(b.exports,b,b.exports,d),b.loaded=!0,b.exports}var a={};return d.m=g,d.c=a,d.p="",d(0)}([function(g,d,a){var c=a(1);d=a(2);a={VERSION:c.VERSION,Client:a(4),Scheduler:a(32)};d.wrapper=a;g.exports=a},function(g){g.exports={VERSION:"1.2.4",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:"long-polling cross-origin-long-polling callback-polling websocket eventsource in-process".split(" "),
MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"]}},function(g,d,a){var c=a(3),b={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(a,e){var d=b.logger||(b.wrapper||b).logger;if(d){var h=Array.prototype.slice.apply(a),f="[Faye",l=this.className,q=h.shift().replace(/\?/g,function(){try{return c(h.shift())}catch(k){return"[Object]"}});l&&(f+="."+l);f+="] ";"function"==typeof d[e]?d[e](f+q):"function"==typeof d&&d(f+q)}}},h;for(h in b.LOG_LEVELS)(function(a){b[a]=
function(){this.writeLog(arguments,a)}})(h);g.exports=b},function(g){g.exports=function(d){return JSON.stringify(d,function(a,c){return this[a]instanceof Array?this[a]:c})}},function(g,d,a){(function(c){var b=a(5),d=a(7),f=(a(9),a(10)),e=a(11),m=a(12),p=a(1),n=a(8),l=a(13),q=a(14),k=a(2),v=a(15),r=a(17),y=a(19),t=a(33),u=a(34),w=a(35),x=a(36);d=d({className:"Client",UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_ENDPOINT:"/bayeux",
INTERVAL:0,initialize:function(a,b){this.info("New client created for ?",a);b=b||{};l(b,"interval timeout endpoints proxy retry scheduler websocketExtensions tls ca".split(" "));this._channels=new r.Set;this._dispatcher=y.create(this,a||this.DEFAULT_ENDPOINT,b);this._messageId=0;this._state=this.UNCONNECTED;this._responseCallbacks={};this._advice={reconnect:this.RETRY,interval:1E3*(b.interval||this.INTERVAL),timeout:1E3*(b.timeout||this.CONNECTION_TIMEOUT)};this._dispatcher.timeout=this._advice.timeout/
1E3;this._dispatcher.bind("message",this._receiveMessage,this);m.Event&&void 0!==c.onbeforeunload&&m.Event.on(c,"beforeunload",function(){0>e.indexOf(this._dispatcher._disabled,"autodisconnect")&&this.disconnect()},this)},addWebsocketExtension:function(a){return this._dispatcher.addWebsocketExtension(a)},disable:function(a){return this._dispatcher.disable(a)},setHeader:function(a,b){return this._dispatcher.setHeader(a,b)},handshake:function(a,k){if(this._advice.reconnect!==this.NONE&&this._state===
this.UNCONNECTED){this._state=this.CONNECTING;var d=this;this.info("Initiating handshake with ?",f.stringify(this._dispatcher.endpoint));this._dispatcher.selectTransport(p.MANDATORY_CONNECTION_TYPES);this._sendMessage({channel:r.HANDSHAKE,version:p.BAYEUX_VERSION,supportedConnectionTypes:this._dispatcher.getConnectionTypes()},{},function(e){e.successful?(this._state=this.CONNECTED,this._dispatcher.clientId=e.clientId,this._dispatcher.selectTransport(e.supportedConnectionTypes),this.info("Handshake successful: ?",
this._dispatcher.clientId),this.subscribe(this._channels.getKeys(),!0),a&&b(function(){a.call(k)})):(this.info("Handshake unsuccessful"),c.setTimeout(function(){d.handshake(a,k)},1E3*this._dispatcher.retry),this._state=this.UNCONNECTED)},this)}},connect:function(a,b){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(a,b)},this);this.callback(a,b);this._state===this.CONNECTED&&(this.info("Calling deferred actions for ?",
this._dispatcher.clientId),this.setDeferredStatus("succeeded"),this.setDeferredStatus("unknown"),this._connectRequest||(this._connectRequest=!0,this.info("Initiating connection for ?",this._dispatcher.clientId),this._sendMessage({channel:r.CONNECT,clientId:this._dispatcher.clientId,connectionType:this._dispatcher.connectionType},{},this._cycleConnection,this)))}},disconnect:function(){if(this._state===this.CONNECTED){this._state=this.DISCONNECTED;this.info("Disconnecting ?",this._dispatcher.clientId);
var a=new w;return this._sendMessage({channel:r.DISCONNECT,clientId:this._dispatcher.clientId},{},function(b){b.successful?(this._dispatcher.close(),a.setDeferredStatus("succeeded")):a.setDeferredStatus("failed",t.parse(b.error))},this),this.info("Clearing channel listeners for ?",this._dispatcher.clientId),this._channels=new r.Set,a}},subscribe:function(a,b,c){if(a instanceof Array)return e.map(a,function(a){return this.subscribe(a,b,c)},this);var k=new x(this,a,b,c),d=!0===b;return this._channels.hasSubscription(a)&&
!d?(this._channels.subscribe([a],k),k.setDeferredStatus("succeeded"),k):(this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._dispatcher.clientId,a);d||this._channels.subscribe([a],k);this._sendMessage({channel:r.SUBSCRIBE,clientId:this._dispatcher.clientId,subscription:a},{},function(b){if(!b.successful)return k.setDeferredStatus("failed",t.parse(b.error)),this._channels.unsubscribe(a,k);b=[].concat(b.subscription);this.info("Subscription acknowledged for ? to ?",this._dispatcher.clientId,
b);k.setDeferredStatus("succeeded")},this)},this),k)},unsubscribe:function(a,b){if(a instanceof Array)return e.map(a,function(a){return this.unsubscribe(a,b)},this);this._channels.unsubscribe(a,b)&&this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._dispatcher.clientId,a);this._sendMessage({channel:r.UNSUBSCRIBE,clientId:this._dispatcher.clientId,subscription:a},{},function(a){a.successful&&(a=[].concat(a.subscription),this.info("Unsubscription acknowledged for ? from ?",
this._dispatcher.clientId,a))},this)},this)},publish:function(a,b,c){l(c||{},["attempts","deadline"]);var k=new w;return this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._dispatcher.clientId,a,b);this._sendMessage({channel:a,data:b,clientId:this._dispatcher.clientId},c,function(a){a.successful?k.setDeferredStatus("succeeded"):k.setDeferredStatus("failed",t.parse(a.error))},this)},this),k},_sendMessage:function(a,b,c,k){a.id=this._generateMessageId();var d=this._advice.timeout?
1.2*this._advice.timeout/1E3:1.2*this._dispatcher.retry;this.pipeThroughExtensions("outgoing",a,null,function(a){a&&(c&&(this._responseCallbacks[a.id]=[c,k]),this._dispatcher.sendMessage(a,d,b||{}))},this)},_generateMessageId:function(){return this._messageId+=1,this._messageId>=Math.pow(2,32)&&(this._messageId=0),this._messageId.toString(36)},_receiveMessage:function(a){var b,c=a.id;void 0!==a.successful&&(b=this._responseCallbacks[c],delete this._responseCallbacks[c]);this.pipeThroughExtensions("incoming",
a,null,function(a){a&&(a.advice&&this._handleAdvice(a.advice),this._deliverMessage(a),b&&b[0].call(b[1],a))},this)},_handleAdvice:function(a){n(this._advice,a);this._dispatcher.timeout=this._advice.timeout/1E3;this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._dispatcher.clientId=null,this._cycleConnection())},_deliverMessage:function(a){a.channel&&void 0!==a.data&&(this.info("Client ? calling listeners for ? with ?",this._dispatcher.clientId,
a.channel,a.data),this._channels.distributeMessage(a))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info("Closed connection for ?",this._dispatcher.clientId));var a=this;c.setTimeout(function(){a.connect()},this._advice.interval)}});n(d.prototype,q);n(d.prototype,v);n(d.prototype,k);n(d.prototype,u);g.exports=d}).call(d,function(){return this}())},function(g,d,a){function c(a){var c=f.length?f.pop():new b;c.task=a;h(c)}function b(){this.task=null}var h=a(6),f=
[],e=[],m=h.makeRequestCallFromTimer(function(){if(e.length)throw e.shift();});g.exports=c;b.prototype.call=function(){try{this.task.call()}catch(p){c.onerror?c.onerror(p):(e.push(p),m())}finally{this.task=null,f[f.length]=this}}},function(g,d){(function(a){function c(a){e.length||l();e[e.length]=a}function b(){for(;m<e.length;){var a=m;if(m+=1,e[a].call(),m>p){a=0;for(var b=e.length-m;b>a;a++)e[a]=e[a+m];e.length-=m;m=0}}m=e.length=0}function d(a){var b=1;a=new n(a);var c=document.createTextNode("");
return a.observe(c,{characterData:!0}),function(){b=-b;c.data=b}}function f(a){return function(){function b(){clearTimeout(c);clearInterval(d);a()}var c=setTimeout(b,0),d=setInterval(b,50)}}g.exports=c;var e=[],m=0,p=1024;a="undefined"!=typeof a?a:self;var n=a.MutationObserver||a.WebKitMutationObserver;var l="function"==typeof n?d(b):f(b);c.requestFlush=l;c.makeRequestCallFromTimer=f}).call(d,function(){return this}())},function(g,d,a){var c=a(8);g.exports=function(a,d){"function"!=typeof a&&(d=a,
a=Object);var b=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this},e=function(){};return e.prototype=a.prototype,b.prototype=new e,c(b.prototype,d),b}},function(g){g.exports=function(d,a,c){if(!a)return d;for(var b in a)a.hasOwnProperty(b)&&(d.hasOwnProperty(b)&&!1===c||d[b]!==a[b]&&(d[b]=a[b]));return d}},function(g,d,a){var c=a(5),b=function(a){return a},h=function(a){throw a;},f=function(a){if(this._state=0,this._onFulfilled=[],this._onRejected=[],"function"==typeof a){var b=
this;a(function(a){n(b,a)},function(a){q(b,a)})}};f.prototype.then=function(a,b){var c=new f;return e(this,a,c),m(this,b,c),c};f.prototype["catch"]=function(a){return this.then(null,a)};var e=function(a,c,d){"function"!=typeof c&&(c=b);var k=function(a){p(c,a,d)};0===a._state?a._onFulfilled.push(k):1===a._state&&k(a._value)},m=function(a,b,c){"function"!=typeof b&&(b=h);var d=function(a){p(b,a,c)};0===a._state?a._onRejected.push(d):2===a._state&&d(a._reason)},p=function(a,b,d){c(function(){a:{try{var c=
a(b)}catch(t){q(d,t);break a}c===d?q(d,new TypeError("Recursive promise chain detected")):n(d,c)}})},n=function(a,b){var c,d,k=!1;try{if(c=typeof b,d=null!==b&&("function"===c||"object"===c)&&b.then,"function"!=typeof d)return l(a,b);d.call(b,function(b){k^(k=!0)&&n(a,b)},function(b){k^(k=!0)&&q(a,b)})}catch(u){k^(k=!0)&&q(a,u)}},l=function(a,b){if(0===a._state){a._state=1;a._value=b;a._onRejected=[];for(var c,d=a._onFulfilled;c=d.shift();)c(b)}},q=function(a,b){if(0===a._state){a._state=2;a._reason=
b;a._onFulfilled=[];for(var c,d=a._onRejected;c=d.shift();)c(b)}};f.resolve=function(a){return new f(function(b){b(a)})};f.reject=function(a){return new f(function(b,c){c(a)})};f.all=function(a){return new f(function(b,c){var d,e=[],k=a.length;if(0===k)return b(e);for(d=0;k>d;d++)(function(a,d){f.resolve(a).then(function(a){e[d]=a;0===--k&&b(e)},c)})(a[d],d)})};f.race=function(a){return new f(function(b,c){for(var d=0,e=a.length;e>d;d++)f.resolve(a[d]).then(b,c)})};f.deferred=f.pending=function(){var a=
{};return a.promise=new f(function(b,c){a.resolve=b;a.reject=c}),a};g.exports=f},function(g){g.exports={isURI:function(d){return d&&d.protocol&&d.host&&d.path},isSameOrigin:function(d){return d.protocol===location.protocol&&d.hostname===location.hostname&&d.port===location.port},parse:function(d){if("string"!=typeof d)return d;var a,c,b={};var h=function(a,c){d=d.replace(c,function(c){return b[a]=c,""});b[a]=b[a]||""};h("protocol",/^[a-z]+:/i);h("host",/^\/\/[^\/\?#]+/);/^\//.test(d)||b.host||(d=
location.pathname.replace(/[^\/]*$/,"")+d);h("pathname",/^[^\?#]*/);h("search",/^\?[^#]*/);h("hash",/^#.*/);b.protocol=b.protocol||location.protocol;b.host?(b.host=b.host.substr(2),a=b.host.split(":"),b.hostname=a[0],b.port=a[1]||""):(b.host=location.host,b.hostname=location.hostname,b.port=location.port);b.pathname=b.pathname||"/";b.path=b.pathname+b.search;h=(a=b.search.replace(/^\?/,""))?a.split("&"):[];var f={};var e=0;for(c=h.length;c>e;e++)a=h[e].split("="),f[decodeURIComponent(a[0]||"")]=decodeURIComponent(a[1]||
"");return b.query=f,b.href=this.stringify(b),b},stringify:function(d){var a=d.protocol+"//"+d.hostname;return d.port&&(a+=":"+d.port),a+(d.pathname+this.queryString(d.query)+(d.hash||""))},queryString:function(d){var a=[],c;for(c in d)d.hasOwnProperty(c)&&a.push(encodeURIComponent(c)+"="+encodeURIComponent(d[c]));return 0===a.length?"":"?"+a.join("&")}}},function(g){g.exports={commonElement:function(d,a){for(var c=0,b=d.length;b>c;c++)if(-1!==this.indexOf(a,d[c]))return d[c];return null},indexOf:function(d,
a){if(d.indexOf)return d.indexOf(a);for(var c=0,b=d.length;b>c;c++)if(d[c]===a)return c;return-1},map:function(d,a,c){if(d.map)return d.map(a,c);var b=[];if(d instanceof Array)for(var h=0,f=d.length;f>h;h++)b.push(a.call(c||null,d[h],h));else for(h in d)d.hasOwnProperty(h)&&b.push(a.call(c||null,h,d[h]));return b},filter:function(d,a,c){if(d.filter)return d.filter(a,c);for(var b=[],h=0,f=d.length;f>h;h++)a.call(c||null,d[h],h)&&b.push(d[h]);return b},asyncEach:function(d,a,c,b){var h=d.length,f=-1,
e=0,m=!1,g=function(){e+=1;if(!m){for(m=!0;0<e;)--e,f+=1,f===h?c&&c.call(b):a(d[f],g);m=!1}};g()}}},function(g,d){(function(a){var c={_registry:[],on:function(a,c,d,e){var b=function(){d.call(e)};a.addEventListener?a.addEventListener(c,b,!1):a.attachEvent("on"+c,b);this._registry.push({_element:a,_type:c,_callback:d,_context:e,_handler:b})},detach:function(a,c,d,e){for(var b,f=this._registry.length;f--;)b=this._registry[f],a&&a!==b._element||c&&c!==b._type||d&&d!==b._callback||e&&e!==b._context||
(b._element.removeEventListener?b._element.removeEventListener(b._type,b._handler,!1):b._element.detachEvent("on"+b._type,b._handler),this._registry.splice(f,1))}};void 0!==a.onunload&&c.on(a,"unload",c.detach,c);g.exports={Event:c}}).call(d,function(){return this}())},function(g,d,a){var c=a(11);g.exports=function(a,d){for(var b in a)if(0>c.indexOf(d,b))throw Error("Unrecognized option: "+b);}},function(g,d,a){(function(c){var b=a(9);g.exports={then:function(a,c){var d=this;return this._promise||
(this._promise=new b(function(a,b){d._resolve=a;d._reject=b})),0===arguments.length?this._promise:this._promise.then(a,c)},callback:function(a,b){return this.then(function(c){a.call(b,c)})},errback:function(a,b){return this.then(null,function(c){a.call(b,c)})},timeout:function(a,b){this.then();var d=this;this._timer=c.setTimeout(function(){d._reject(b)},1E3*a)},setDeferredStatus:function(a,b){this._timer&&c.clearTimeout(this._timer);this.then();"succeeded"===a?this._resolve(b):"failed"===a?this._reject(b):
delete this._promise}}}).call(d,function(){return this}())},function(g,d,a){d=a(8);a=a(16);var c={countListeners:function(a){return this.listeners(a).length},bind:function(a,c,d){var b=Array.prototype.slice,f=function(){c.apply(d,b.call(arguments))};return this._listeners=this._listeners||[],this._listeners.push([a,c,d,f]),this.on(a,f)},unbind:function(a,c,d){this._listeners=this._listeners||[];for(var b,f=this._listeners.length;f--;)b=this._listeners[f],b[0]===a&&(!c||b[1]===c&&b[2]===d)&&(this._listeners.splice(f,
1),this.removeListener(a,b[3]))}};d(c,a.prototype);c.trigger=c.emit;g.exports=c},function(g){function d(){}var a="function"==typeof Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};g.exports=d;d.prototype.emit=function(c){if("error"===c&&(!this._events||!this._events.error||a(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var b=
this._events[c];if(!b)return!1;if("function"==typeof b){switch(arguments.length){case 1:b.call(this);break;case 2:b.call(this,arguments[1]);break;case 3:b.call(this,arguments[1],arguments[2]);break;default:var d=Array.prototype.slice.call(arguments,1);b.apply(this,d)}return!0}if(a(b)){d=Array.prototype.slice.call(arguments,1);b=b.slice();for(var f=0,e=b.length;e>f;f++)b[f].apply(this,d);return!0}return!1};d.prototype.addListener=function(c,b){if("function"!=typeof b)throw Error("addListener only takes instances of Function");
return this._events||(this._events={}),this.emit("newListener",c,b),this._events[c]?a(this._events[c])?this._events[c].push(b):this._events[c]=[this._events[c],b]:this._events[c]=b,this};d.prototype.on=d.prototype.addListener;d.prototype.once=function(a,b){var c=this;return c.on(a,function e(){c.removeListener(a,e);b.apply(this,arguments)}),this};d.prototype.removeListener=function(c,b){if("function"!=typeof b)throw Error("removeListener only takes instances of Function");if(!this._events||!this._events[c])return this;
var d=this._events[c];if(a(d)){a:if(d.indexOf)var f=d.indexOf(b);else{for(f=0;f<d.length;f++)if(b===d[f])break a;f=-1}if(0>f)return this;d.splice(f,1);0==d.length&&delete this._events[c]}else this._events[c]===b&&delete this._events[c];return this};d.prototype.removeAllListeners=function(a){return 0===arguments.length?(this._events={},this):(a&&this._events&&this._events[a]&&(this._events[a]=null),this)};d.prototype.listeners=function(c){return this._events||(this._events={}),this._events[c]||(this._events[c]=
[]),a(this._events[c])||(this._events[c]=[this._events[c]]),this._events[c]}},function(g,d,a){d=a(7);var c=a(8),b=a(15),h=a(18),f=d({initialize:function(a){this.id=this.name=a},push:function(a){this.trigger("message",a)},isUnused:function(){return 0===this.countListeners("message")}});c(f.prototype,b);c(f,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(a){var b=
this.parse(a);a=["/**",a];var c=b.slice();c[c.length-1]="*";a.push(this.unparse(c));for(var d=1,e=b.length;e>d;d++)c=b.slice(0,d),c.push("**"),a.push(this.unparse(c));return a},isValid:function(a){return h.CHANNEL_NAME.test(a)||h.CHANNEL_PATTERN.test(a)},parse:function(a){return this.isValid(a)?a.split("/").slice(1):null},unparse:function(a){return"/"+a.join("/")},isMeta:function(a){return(a=this.parse(a))?a[0]===this.META:null},isService:function(a){return(a=this.parse(a))?a[0]===this.SERVICE:null},
isSubscribable:function(a){return this.isValid(a)?!this.isMeta(a)&&!this.isService(a):null},Set:d({initialize:function(){this._channels={}},getKeys:function(){var a=[],b;for(b in this._channels)a.push(b);return a},remove:function(a){delete this._channels[a]},hasSubscription:function(a){return this._channels.hasOwnProperty(a)},subscribe:function(a,b){for(var c,d=0,l=a.length;l>d;d++)c=a[d],(this._channels[c]=this._channels[c]||new f(c)).bind("message",b)},unsubscribe:function(a,b){var c=this._channels[a];
return c?(c.unbind("message",b),c.isUnused()?(this.remove(a),!0):!1):!1},distributeMessage:function(a){for(var b=f.expand(a.channel),c=0,d=b.length;d>c;c++){var l=this._channels[b[c]];l&&l.trigger("message",a)}}})});g.exports=f},function(g){g.exports={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|_|!|~|\(|\)|\$|@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|_|!|~|\(|\)|\$|@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|_|!|~|\(|\)|\$|@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|_|!|~|\(|\)|\$|@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|_|!|~|\(|\)|\$|@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|_|!|~|\(|\)|\$|@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|_|!|~|\(|\)|\$|@)| |\/|\*|\.))*)$/,
VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|_))*)*$/}},function(g,d,a){(function(c){var b=a(7),d=a(10),f=a(20),e=a(8),m=a(2),p=a(15),n=a(21),l=a(32),q=b({className:"Dispatcher",MAX_REQUEST_SIZE:2048,DEFAULT_RETRY:5,UP:1,DOWN:2,initialize:function(a,b,c){this._client=a;this.endpoint=d.parse(b);this._alternates=c.endpoints||{};this.cookies=f.CookieJar&&new f.CookieJar;this._disabled=[];this._envelopes={};this.headers={};this.retry=c.retry||this.DEFAULT_RETRY;this._scheduler=
c.scheduler||l;this._state=0;this.transports={};this.wsExtensions=[];this.proxy=c.proxy||{};"string"==typeof this._proxy&&(this._proxy={origin:this._proxy});if(a=c.websocketExtensions){a=[].concat(a);b=0;for(var k=a.length;k>b;b++)this.addWebsocketExtension(a[b])}this.tls=c.tls||{};this.tls.ca=this.tls.ca||c.ca;for(var e in this._alternates)this._alternates[e]=d.parse(this._alternates[e]);this.maxRequestSize=this.MAX_REQUEST_SIZE},endpointFor:function(a){return this._alternates[a]||this.endpoint},
addWebsocketExtension:function(a){this.wsExtensions.push(a)},disable:function(a){this._disabled.push(a)},setHeader:function(a,b){this.headers[a]=b},close:function(){var a=this._transport;delete this._transport;a&&a.close()},getConnectionTypes:function(){return n.getConnectionTypes()},selectTransport:function(a){n.get(this,a,this._disabled,function(a){this.debug("Selected ? transport for ?",a.connectionType,d.stringify(a.endpoint));a!==this._transport&&(this._transport&&this._transport.close(),this._transport=
a,this.connectionType=a.connectionType)},this)},sendMessage:function(a,b,c){c=c||{};var d,l=a.id,k=c.attempts;c=c.deadline&&(new Date).getTime()+1E3*c.deadline;var f=this._envelopes[l];f||(d=new this._scheduler(a,{timeout:b,interval:this.retry,attempts:k,deadline:c}),f=this._envelopes[l]={message:a,scheduler:d});this._sendEnvelope(f)},_sendEnvelope:function(a){if(this._transport&&!a.request&&!a.timer){var b=a.message,d=a.scheduler,l=this;if(!d.isDeliverable())return d.abort(),void delete this._envelopes[b.id];
a.timer=c.setTimeout(function(){l.handleError(b)},1E3*d.getTimeout());d.send();a.request=this._transport.sendMessage(b)}},handleResponse:function(a){var b=this._envelopes[a.id];void 0!==a.successful&&b&&(b.scheduler.succeed(),delete this._envelopes[a.id],c.clearTimeout(b.timer));this.trigger("message",a);this._state!==this.UP&&(this._state=this.UP,this._client.trigger("transport:up"))},handleError:function(a,b){var d=this._envelopes[a.id],l=d&&d.request,f=this;l&&(l.then(function(a){a&&a.abort&&a.abort()}),
l=d.scheduler,l.fail(),c.clearTimeout(d.timer),d.request=d.timer=null,b?this._sendEnvelope(d):d.timer=c.setTimeout(function(){d.timer=null;f._sendEnvelope(d)},1E3*l.getInterval()),this._state!==this.DOWN&&(this._state=this.DOWN,this._client.trigger("transport:down")))}});q.create=function(a,b,c){return new q(a,b,c)};e(q.prototype,p);e(q.prototype,m);g.exports=q}).call(d,function(){return this}())},function(g){g.exports={}},function(g,d,a){d=a(22);d.register("websocket",a(24));d.register("eventsource",
a(28));d.register("long-polling",a(29));d.register("cross-origin-long-polling",a(30));d.register("callback-polling",a(31));g.exports=d},function(g,d,a){var c=a(7),b=a(20).Cookie,h=a(9),f=a(10),e=a(11),m=a(8);d=a(2);var p=a(23),n=a(17);a=m(c({className:"Transport",DEFAULT_PORTS:{"http:":80,"https:":443,"ws:":80,"wss:":443},MAX_DELAY:0,batching:!0,initialize:function(a,b){this._dispatcher=a;this.endpoint=b;this._outbox=[];this._proxy=m({},this._dispatcher.proxy);this._proxy.origin||(this._proxy.origin=
this._findProxy())},close:function(){},encode:function(){return""},sendMessage:function(a){return this.debug("Client ? sending message to ?: ?",this._dispatcher.clientId,f.stringify(this.endpoint),a),this.batching?(this._outbox.push(a),this._flushLargeBatch(),a.channel===n.HANDSHAKE?this._publish(.01):(a.channel===n.CONNECT&&(this._connectMessage=a),this._publish(this.MAX_DELAY))):h.resolve(this.request([a]))},_makePromise:function(){var a=this;this._requestPromise=this._requestPromise||new h(function(b){a._resolvePromise=
b})},_publish:function(a){return this._makePromise(),this.addTimeout("publish",a,function(){this._flush();delete this._requestPromise},this),this._requestPromise},_flush:function(){this.removeTimeout("publish");1<this._outbox.length&&this._connectMessage&&(this._connectMessage.advice={timeout:0});this._resolvePromise(this.request(this._outbox));this._connectMessage=null;this._outbox=[]},_flushLargeBatch:function(){if(!(this.encode(this._outbox).length<this._dispatcher.maxRequestSize)){var a=this._outbox.pop();
this._makePromise();this._flush();a&&this._outbox.push(a)}},_receive:function(a){if(a){a=[].concat(a);this.debug("Client ? received from ? via ?: ?",this._dispatcher.clientId,f.stringify(this.endpoint),this.connectionType,a);for(var b=0,c=a.length;c>b;b++)this._dispatcher.handleResponse(a[b])}},_handleError:function(a){a=[].concat(a);this.debug("Client ? failed to send to ? via ?: ?",this._dispatcher.clientId,f.stringify(this.endpoint),this.connectionType,a);for(var b=0,c=a.length;c>b;b++)this._dispatcher.handleError(a[b])},
_getCookies:function(){var a=this._dispatcher.cookies,b=f.stringify(this.endpoint);return a?e.map(a.getCookiesSync(b),function(a){return a.cookieString()}).join("; "):""},_storeCookies:function(a){var c=this._dispatcher.cookies,d=f.stringify(this.endpoint);if(a&&c){a=[].concat(a);for(var e=0,l=a.length;l>e;e++){var h=b.parse(a[e]);c.setCookieSync(h,d)}}},_findProxy:function(){if("undefined"!=typeof process){var a=this.endpoint.protocol;if(a){var b,c;a=a.replace(/:$/,"").toLowerCase()+"_proxy";var d=
a.toUpperCase(),f=process.env;return"http_proxy"===a&&f.REQUEST_METHOD?(b=Object.keys(f).filter(function(a){return/^http_proxy$/i.test(a)}),1===b.length?b[0]===a&&void 0===f[d]&&(c=f[a]):1<b.length&&(c=f[a]),c=c||f["CGI_"+d]):(c=f[a]||f[d],c&&!f[a]&&console.warn("The environment variable "+d+" is discouraged. Use "+a+".")),c}}}}),{get:function(a,b,c,d,h){var k=a.endpoint;e.asyncEach(this._transports,function(f,k){var l=f[0],g=f[1],q=a.endpointFor(l);return 0<=e.indexOf(c,l)?k():0>e.indexOf(b,l)?(g.isUsable(a,
q,function(){}),k()):void g.isUsable(a,q,function(b){if(!b)return k();b=g.hasOwnProperty("create")?g.create(a,q):new g(a,q);d.call(h,b)})},function(){throw Error("Could not find a usable connection type for "+f.stringify(k));})},register:function(a,b){this._transports.push([a,b]);b.prototype.connectionType=a},getConnectionTypes:function(){return e.map(this._transports,function(a){return a[0]})},_transports:[]});m(a.prototype,d);m(a.prototype,p);g.exports=a},function(g,d){(function(a){g.exports={addTimeout:function(c,
b,d,f){if(this._timeouts=this._timeouts||{},!this._timeouts.hasOwnProperty(c)){var e=this;this._timeouts[c]=a.setTimeout(function(){delete e._timeouts[c];d.call(f)},1E3*b)}},removeTimeout:function(c){this._timeouts=this._timeouts||{};var b=this._timeouts[c];b&&(a.clearTimeout(b),delete this._timeouts[c])},removeAllTimeouts:function(){this._timeouts=this._timeouts||{};for(var a in this._timeouts)this.removeTimeout(a)}}}).call(d,function(){return this}())},function(g,d,a){(function(c){var b=a(7),d=
a(9),f=a(25),e=a(10),m=a(12),p=a(26),n=a(8),l=a(3),q=a(27),k=a(14),v=a(22),r=n(b(v,{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(a,b){this.callback(function(){a.call(b,!0)});this.errback(function(){a.call(b,!1)});this.connect()},request:function(a){this._pending=this._pending||new f;for(var b=0,c=a.length;c>b;b++)this._pending.add(a[b]);var e=this,k=new d(function(b){e.callback(function(c){c&&1===c.readyState&&(c.send(l(a)),b(c))});e.connect()});return{abort:function(){k.then(function(a){a.close()})}}},
connect:function(){if(!r._unloaded&&(this._state=this._state||this.UNCONNECTED,this._state===this.UNCONNECTED)){this._state=this.CONNECTING;var a=this._createSocket();if(!a)return this.setDeferredStatus("failed");var b=this;a.onopen=function(){a.headers&&b._storeCookies(a.headers["set-cookie"]);b._socket=a;b._state=b.CONNECTED;b._everConnected=!0;b._ping();b.setDeferredStatus("succeeded",a)};var c=!1;a.onclose=a.onerror=function(){if(!c){c=!0;var d=b._state===b.CONNECTED;a.onopen=a.onclose=a.onerror=
a.onmessage=null;delete b._socket;b._state=b.UNCONNECTED;b.removeTimeout("ping");var f=b._pending?b._pending.toArray():[];delete b._pending;d||b._everConnected?(b.setDeferredStatus("unknown"),b._handleError(f,d)):b.setDeferredStatus("failed")}};a.onmessage=function(a){try{var c=JSON.parse(a.data)}catch(z){}if(c){c=[].concat(c);a=0;for(var d=c.length;d>a;a++)void 0!==c[a].successful&&b._pending.remove(c[a]);b._receive(c)}}}},close:function(){this._socket&&this._socket.close()},_createSocket:function(){var a=
r.getSocketUrl(this.endpoint),b=this._dispatcher.headers,c=this._dispatcher.wsExtensions,d=this._getCookies();b={extensions:c,headers:b,proxy:this._proxy,tls:this._dispatcher.tls};return""!==d&&(b.headers.Cookie=d),q.create(a,[],b)},_ping:function(){this._socket&&1===this._socket.readyState&&(this._socket.send("[]"),this.addTimeout("ping",this._dispatcher.timeout/2,this._ping,this))}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(a,b){var c=a.transports.websocket=a.transports.websocket||
{};return c[b.href]=c[b.href]||new this(a,b),c[b.href]},getSocketUrl:function(a){return a=p(a),a.protocol=this.PROTOCOLS[a.protocol],e.stringify(a)},isUsable:function(a,b,c,d){this.create(a,b).isUsable(c,d)}});n(r.prototype,k);m.Event&&void 0!==c.onbeforeunload&&m.Event.on(c,"beforeunload",function(){r._unloaded=!0});g.exports=r}).call(d,function(){return this}())},function(g,d,a){d=a(7);g.exports=d({initialize:function(){this._index={}},add:function(a){var b=void 0!==a.id?a.id:a;return this._index.hasOwnProperty(b)?
!1:(this._index[b]=a,!0)},forEach:function(a,b){for(var c in this._index)this._index.hasOwnProperty(c)&&a.call(b,this._index[c])},isEmpty:function(){for(var a in this._index)if(this._index.hasOwnProperty(a))return!1;return!0},member:function(a){for(var b in this._index)if(this._index[b]===a)return!0;return!1},remove:function(a){a=void 0!==a.id?a.id:a;var b=this._index[a];return delete this._index[a],b},toArray:function(){var a=[];return this.forEach(function(b){a.push(b)}),a}})},function(g){var d=
function(a){var c;if(a instanceof Array){var b=[];for(c=a.length;c--;)b[c]=d(a[c]);return b}if("object"==typeof a){b=null===a?null:{};for(c in a)b[c]=d(a[c]);return b}return a};g.exports=d},function(g,d){(function(a){var c=a.MozWebSocket||a.WebSocket;g.exports={create:function(a){return"function"!=typeof c?null:new c(a)}}}).call(d,function(){return this}())},function(g,d,a){(function(c){var b=a(7),d=a(10),f=a(26),e=a(8),m=a(14),p=a(22),n=a(29);b=e(b(p,{initialize:function(a,b){if(p.prototype.initialize.call(this,
a,b),!c.EventSource)return this.setDeferredStatus("failed");this._xhr=new n(a,b);b=f(b);b.pathname+="/"+a.clientId;var e=new c.EventSource(d.stringify(b)),g=this;e.onopen=function(){g._everConnected=!0;g.setDeferredStatus("succeeded")};e.onerror=function(){g._everConnected?g._handleError([]):(g.setDeferredStatus("failed"),e.close())};e.onmessage=function(a){try{var b=JSON.parse(a.data)}catch(t){}b?g._receive(b):g._handleError([])};this._socket=e},close:function(){this._socket&&(this._socket.onopen=
this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket)},isUsable:function(a,b){this.callback(function(){a.call(b,!0)});this.errback(function(){a.call(b,!1)})},encode:function(a){return this._xhr.encode(a)},request:function(a){return this._xhr.request(a)}}),{isUsable:function(a,b,c,d){return a.clientId?void n.isUsable(a,b,function(f){return f?void this.create(a,b).isUsable(c,d):c.call(d,!1)},this):c.call(d,!1)},create:function(a,b){var c=a.transports.eventsource=
a.transports.eventsource||{},e=a.clientId,g=f(b);return g.pathname+="/"+(e||""),g=d.stringify(g),c[g]=c[g]||new this(a,b),c[g]}});e(b.prototype,m);g.exports=b}).call(d,function(){return this}())},function(g,d,a){(function(c){var b=a(7),d=a(10),f=a(12),e=a(8),m=a(3),p=a(22);b=e(b(p,{encode:function(a){return m(a)},request:function(a){var b=this.endpoint.href,d=this;if(c.XMLHttpRequest)var e=new XMLHttpRequest;else{if(!c.ActiveXObject)return this._handleError(a);e=new ActiveXObject("Microsoft.XMLHTTP")}e.open("POST",
b,!0);e.setRequestHeader("Content-Type","application/json");e.setRequestHeader("Pragma","no-cache");e.setRequestHeader("X-Requested-With","XMLHttpRequest");b=this._dispatcher.headers;for(var g in b)b.hasOwnProperty(g)&&e.setRequestHeader(g,b[g]);var h=function(){e.abort()};return void 0!==c.onbeforeunload&&f.Event.on(c,"beforeunload",h),e.onreadystatechange=function(){if(e&&4===e.readyState){var b=null,g=e.status,k=e.responseText;g=200<=g&&300>g||304===g||1223===g;if(void 0!==c.onbeforeunload&&f.Event.detach(c,
"beforeunload",h),e.onreadystatechange=function(){},e=null,!g)return d._handleError(a);try{b=JSON.parse(k)}catch(w){}b?d._receive(b):d._handleError(a)}},e.send(this.encode(a)),e}}),{isUsable:function(a,b,c,e){a="ReactNative"===navigator.product||d.isSameOrigin(b);c.call(e,a)}});g.exports=b}).call(d,function(){return this}())},function(g,d,a){(function(c){var b=a(7),d=a(25),f=a(10),e=a(8),m=a(3),p=a(22),n=e(b(p,{encode:function(a){return"message="+encodeURIComponent(m(a))},request:function(a){var b,
d=c.XDomainRequest?XDomainRequest:XMLHttpRequest,e=new d,g=++n._id,h=this._dispatcher.headers,l=this;if(e.open("POST",f.stringify(this.endpoint),!0),e.setRequestHeader)for(b in e.setRequestHeader("Pragma","no-cache"),h)h.hasOwnProperty(b)&&e.setRequestHeader(b,h[b]);var m=function(){return e?(n._pending.remove(g),e.onload=e.onerror=e.ontimeout=e.onprogress=null,void(e=null)):!1};return e.onload=function(){try{var b=JSON.parse(e.responseText)}catch(x){}m();b?l._receive(b):l._handleError(a)},e.onerror=
e.ontimeout=function(){m();l._handleError(a)},e.onprogress=function(){},d===c.XDomainRequest&&n._pending.add({id:g,xhr:e}),e.send(this.encode(a)),e}}),{_id:0,_pending:new d,isUsable:function(a,b,d,e){return f.isSameOrigin(b)?d.call(e,!1):c.XDomainRequest?d.call(e,b.protocol===location.protocol):c.XMLHttpRequest?d.call(e,void 0!==(new XMLHttpRequest).withCredentials):d.call(e,!1)}});g.exports=n}).call(d,function(){return this}())},function(g,d,a){(function(c){var b=a(7),d=a(10),f=a(26),e=a(8),m=a(3),
p=a(22),n=e(b(p,{encode:function(a){var b=f(this.endpoint);return b.query.message=m(a),b.query.jsonp="__jsonp"+n._cbCount+"__",d.stringify(b)},request:function(a){var b=document.getElementsByTagName("head")[0],e=document.createElement("script"),g=n.getCallbackName(),h=f(this.endpoint),l=this;h.query.message=m(a);h.query.jsonp=g;var p=function(){if(!c[g])return!1;c[g]=void 0;try{delete c[g]}catch(u){}e.parentNode.removeChild(e)};return c[g]=function(a){p();l._receive(a)},e.type="text/javascript",e.src=
d.stringify(h),b.appendChild(e),e.onerror=function(){p();l._handleError(a)},{abort:p}}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,"__jsonp"+this._cbCount+"__"},isUsable:function(a,b,c,d){c.call(d,!0)}});g.exports=n}).call(d,function(){return this}())},function(g,d,a){d=function(a,b){this.message=a;this.options=b;this.attempts=0};a(8)(d.prototype,{getTimeout:function(){return this.options.timeout},getInterval:function(){return this.options.interval},isDeliverable:function(){var a=
this.options.attempts,b=this.attempts,d=this.options.deadline,f=(new Date).getTime();return void 0!==a&&b>=a?!1:void 0!==d&&f>d?!1:!0},send:function(){this.attempts+=1},succeed:function(){},fail:function(){},abort:function(){}});g.exports=d},function(g,d,a){d=a(7);var c=a(18),b=d({initialize:function(a,b,c){this.code=a;this.params=Array.prototype.slice.call(b);this.message=c},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}});b.parse=function(a){if(a=a||"",!c.ERROR.test(a))return new b(null,
[],a);a=a.split(":");var d=parseInt(a[0]),e=a[1].split(",");a=a[2];return new b(d,e,a)};var h={versionMismatch:[300,"Version mismatch"],conntypeMismatch:[301,"Connection types not supported"],extMismatch:[302,"Extension mismatch"],badRequest:[400,"Bad request"],clientUnknown:[401,"Unknown client"],parameterMissing:[402,"Missing required parameter"],channelForbidden:[403,"Forbidden channel"],channelUnknown:[404,"Unknown channel"],channelInvalid:[405,"Invalid channel"],extUnknown:[406,"Unknown extension"],
publishFailed:[407,"Failed to publish"],serverError:[500,"Internal server error"]},f;for(f in h)(function(a){b[a]=function(){return(new b(h[a][0],arguments,h[a][1])).toString()}})(f);g.exports=b},function(g,d,a){d=a(8);a=a(2);var c={addExtension:function(a){this._extensions=this._extensions||[];this._extensions.push(a);a.added&&a.added(this)},removeExtension:function(a){if(this._extensions)for(var b=this._extensions.length;b--;)this._extensions[b]===a&&(this._extensions.splice(b,1),a.removed&&a.removed(this))},
pipeThroughExtensions:function(a,c,d,e,g){if(this.debug("Passing through ? extensions: ?",a,c),!this._extensions)return e.call(g,c);var b=this._extensions.slice(),f=function(c){if(!c)return e.call(g,c);var h=b.shift();if(!h)return e.call(g,c);var k=h[a];return k?void(3<=k.length?h[a](c,d,f):h[a](c,f)):f(c)};f(c)}};d(c,a);g.exports=c},function(g,d,a){d=a(7);a=a(14);g.exports=d(a)},function(g,d,a){var c=a(7);d=a(8);a=a(14);c=c({initialize:function(a,c,d,e){this._client=a;this._channels=c;this._callback=
d;this._context=e;this._cancelled=!1},withChannel:function(a,c){return this._withChannel=[a,c],this},apply:function(a,c){var b=c[0];this._callback&&this._callback.call(this._context,b.data);this._withChannel&&this._withChannel[0].call(this._withChannel[1],b.channel,b.data)},cancel:function(){this._cancelled||(this._client.unsubscribe(this._channels,this),this._cancelled=!0)},unsubscribe:function(){this.cancel()}});d(c.prototype,a);g.exports=c}]);